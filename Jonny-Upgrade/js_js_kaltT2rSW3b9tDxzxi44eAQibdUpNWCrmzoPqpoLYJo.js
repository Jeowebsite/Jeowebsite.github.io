/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/
(function () {
  var settingsElement = document.querySelector('head > script[type="application/json"][data-drupal-selector="drupal-settings-json"], body > script[type="application/json"][data-drupal-selector="drupal-settings-json"]');
  window.drupalSettings = {};
  if (settingsElement !== null) {
    window.drupalSettings = JSON.parse(settingsElement.textContent);
  }
})();;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/
window.Drupal = {
  behaviors: {},
  locale: {}
};
(function (Drupal, drupalSettings, drupalTranslations, console, Proxy, Reflect) {
  Drupal.throwError = function (error) {
    setTimeout(function () {
      throw error;
    }, 0);
  };
  Drupal.attachBehaviors = function (context, settings) {
    context = context || document;
    settings = settings || drupalSettings;
    var behaviors = Drupal.behaviors;
    Object.keys(behaviors || {}).forEach(function (i) {
      if (typeof behaviors[i].attach === 'function') {
        try {
          behaviors[i].attach(context, settings);
        } catch (e) {
          Drupal.throwError(e);
        }
      }
    });
  };
  Drupal.detachBehaviors = function (context, settings, trigger) {
    context = context || document;
    settings = settings || drupalSettings;
    trigger = trigger || 'unload';
    var behaviors = Drupal.behaviors;
    Object.keys(behaviors || {}).forEach(function (i) {
      if (typeof behaviors[i].detach === 'function') {
        try {
          behaviors[i].detach(context, settings, trigger);
        } catch (e) {
          Drupal.throwError(e);
        }
      }
    });
  };
  Drupal.checkPlain = function (str) {
    str = str.toString().replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#39;');
    return str;
  };
  Drupal.formatString = function (str, args) {
    var processedArgs = {};
    Object.keys(args || {}).forEach(function (key) {
      switch (key.charAt(0)) {
        case '@':
          processedArgs[key] = Drupal.checkPlain(args[key]);
          break;
        case '!':
          processedArgs[key] = args[key];
          break;
        default:
          processedArgs[key] = Drupal.theme('placeholder', args[key]);
          break;
      }
    });
    return Drupal.stringReplace(str, processedArgs, null);
  };
  Drupal.stringReplace = function (str, args, keys) {
    if (str.length === 0) {
      return str;
    }
    if (!Array.isArray(keys)) {
      keys = Object.keys(args || {});
      keys.sort(function (a, b) {
        return a.length - b.length;
      });
    }
    if (keys.length === 0) {
      return str;
    }
    var key = keys.pop();
    var fragments = str.split(key);
    if (keys.length) {
      for (var i = 0; i < fragments.length; i++) {
        fragments[i] = Drupal.stringReplace(fragments[i], args, keys.slice(0));
      }
    }
    return fragments.join(args[key]);
  };
  Drupal.t = function (str, args, options) {
    options = options || {};
    options.context = options.context || '';
    if (typeof drupalTranslations !== 'undefined' && drupalTranslations.strings && drupalTranslations.strings[options.context] && drupalTranslations.strings[options.context][str]) {
      str = drupalTranslations.strings[options.context][str];
    }
    if (args) {
      str = Drupal.formatString(str, args);
    }
    return str;
  };
  Drupal.url = function (path) {
    return drupalSettings.path.baseUrl + drupalSettings.path.pathPrefix + path;
  };
  Drupal.url.toAbsolute = function (url) {
    var urlParsingNode = document.createElement('a');
    try {
      url = decodeURIComponent(url);
    } catch (e) {}
    urlParsingNode.setAttribute('href', url);
    return urlParsingNode.cloneNode(false).href;
  };
  Drupal.url.isLocal = function (url) {
    var absoluteUrl = Drupal.url.toAbsolute(url);
    var protocol = window.location.protocol;
    if (protocol === 'http:' && absoluteUrl.indexOf('https:') === 0) {
      protocol = 'https:';
    }
    var baseUrl = "".concat(protocol, "//").concat(window.location.host).concat(drupalSettings.path.baseUrl.slice(0, -1));
    try {
      absoluteUrl = decodeURIComponent(absoluteUrl);
    } catch (e) {}
    try {
      baseUrl = decodeURIComponent(baseUrl);
    } catch (e) {}
    return absoluteUrl === baseUrl || absoluteUrl.indexOf("".concat(baseUrl, "/")) === 0;
  };
  Drupal.formatPlural = function (count, singular, plural, args, options) {
    args = args || {};
    args['@count'] = count;
    var pluralDelimiter = drupalSettings.pluralDelimiter;
    var translations = Drupal.t(singular + pluralDelimiter + plural, args, options).split(pluralDelimiter);
    var index = 0;
    if (typeof drupalTranslations !== 'undefined' && drupalTranslations.pluralFormula) {
      index = count in drupalTranslations.pluralFormula ? drupalTranslations.pluralFormula[count] : drupalTranslations.pluralFormula.default;
    } else if (args['@count'] !== 1) {
      index = 1;
    }
    return translations[index];
  };
  Drupal.encodePath = function (item) {
    return window.encodeURIComponent(item).replace(/%2F/g, '/');
  };
  Drupal.deprecationError = function (_ref) {
    var message = _ref.message;
    if (drupalSettings.suppressDeprecationErrors === false && typeof console !== 'undefined' && console.warn) {
      console.warn("[Deprecation] ".concat(message));
    }
  };
  Drupal.deprecatedProperty = function (_ref2) {
    var target = _ref2.target,
      deprecatedProperty = _ref2.deprecatedProperty,
      message = _ref2.message;
    if (!Proxy || !Reflect) {
      return target;
    }
    return new Proxy(target, {
      get: function get(target, key) {
        if (key === deprecatedProperty) {
          Drupal.deprecationError({
            message: message
          });
        }
        for (var _len = arguments.length, rest = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
          rest[_key - 2] = arguments[_key];
        }
        return Reflect.get.apply(Reflect, [target, key].concat(rest));
      }
    });
  };
  Drupal.theme = function (func) {
    if (func in Drupal.theme) {
      var _Drupal$theme;
      for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
        args[_key2 - 1] = arguments[_key2];
      }
      return (_Drupal$theme = Drupal.theme)[func].apply(_Drupal$theme, args);
    }
  };
  Drupal.theme.placeholder = function (str) {
    return "<em class=\"placeholder\">".concat(Drupal.checkPlain(str), "</em>");
  };
})(Drupal, window.drupalSettings, window.drupalTranslations, window.console, window.Proxy, window.Reflect);;
/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/
if (window.jQuery) {
  jQuery.noConflict();
}
document.documentElement.className += ' js';
(function (Drupal, drupalSettings) {
  var domReady = function domReady(callback) {
    var listener = function listener() {
      callback();
      document.removeEventListener('DOMContentLoaded', listener);
    };
    if (document.readyState !== 'loading') {
      setTimeout(callback, 0);
    } else {
      document.addEventListener('DOMContentLoaded', listener);
    }
  };
  domReady(function () {
    Drupal.attachBehaviors(document, drupalSettings);
  });
})(Drupal, window.drupalSettings);;
(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}window.$=jQuery,function(t){var a=(new Date).getTime(),o=window.location.pathname,n=[o],i=sessionStorage.getItem("total_page")?sessionStorage.getItem("total_page"):[];i.includes(o)?sessionStorage.setItem("total_page",i):sessionStorage.setItem("total_page",n.concat(i).reverse()),t(window).on("beforeunload",(function(){console.log("CMGCA: Link clicked "+location.pathname+" "+new Date);var e=(new Date).getTime()-a;window.VWO=window.VWO||[],VWO.event=VWO.event||function(){VWO.push(["event"].concat([].slice.call(arguments)))},VWO.event("timeOnPage",{onPage:e/1e3}),ga4_trackEvent("user_engagement",["TimeOnPage"],[e/1e3])})),window.onbeforeunload=function(e){console.log("CMGCA: Tab closed or page refreshed "+location.pathname+" "+new Date);var t=(new Date).getTime()-a,o=sessionStorage.getItem("total_time_spent")?sessionStorage.getItem("total_time_spent"):0,n=parseInt(o)+parseInt(t),i=(sessionStorage.getItem("total_page").match(/,/g)||[]).length+1;VWO.event("sessionDuration",{sessionDuration:n/1e3}),VWO.event("uniquePageView",{uniquepageview:i}),ga4_trackEvent("user_engagement",["PagesperSession","SessionDuration"],[i,n/1e3])},t("a").on("click",(function(){window.onbeforeunload=null})),window.loadJs=function(e,t){var a=location.origin;null==document.querySelector("script[src='".concat(a).concat(t,"']"))&&((e=document.createElement("script")).setAttribute("src",a+t),document.head.appendChild(e))},jQuery(document).ready((function(){t(".l-aside").length&&(t("body").addClass("has-leftads"),$spacer=t('<div class="custom-space"></div>'),$spacer.appendTo(t(".main-col, .main-aside")));var e=jQuery(".collection-faq"),a=jQuery(".about-data");if(e.find("div").length<2&&e.hide(),""==a.text()&&a.hide(),document.documentElement.clientWidth>768&&t(".mob-med-rect-atf-wrapper").length&&t(".mob-med-rect-atf-wrapper").remove(),t(".progress-bar").width(0),t(".progress .progress-bar").each((function(){var e=parseInt(t(this).attr("data-width"));e>0?t(this).animate({width:e+"%"},1200):t(this).css({color:"black",background:"none"},1200)})),null==getCookie("cmg_uid")||null==getCookie("cmg_sx")&&null==getCookie("cmg_fx")||t(".footer").hide(),"undefined"==typeof gameId){var o=window.location.pathname;if("/"==o){var n=jQuery(".login").attr("href");jQuery(".welcome-box .login-link .login").attr("href",n),jQuery(".progress-text a").attr("href",n)}else{n=jQuery(".login").attr("href")+"?destination="+o;jQuery(".welcome-box .login-link .login").attr("href",n),jQuery(".progress-text a").attr("href",n)}}function i(e){var t=document.querySelector(e);t&&(t.onkeydown=function(e){13==e.keyCode&&t.querySelector("#edit-submit").click()})}jQuery(".welcome-box a.btn.free-account").length&&jQuery(".welcome-box a.btn.free-account").click((function(e){if(e.preventDefault(),"en"==drupalSettings.language)var t="/signup";else t="/"+drupalSettings.language+"/signup";"undefined"!=typeof signup_abtest_2_variations_custom_selection?window.location.href=window.location.protocol+"//"+window.location.host+t+"?signup_customize="+signup_abtest_2_variations_custom_selection:window.location.href=window.location.protocol+"//"+window.location.host+t+"?v1"})),jQuery(".leveled-up-status .close").length&&jQuery(".leveled-up-status .close").click((function(e){xp_levelup_alert_handler(e)})),null!==getCookie("cmg_sx")?(t(".pane-bean-new-go-ad-free").hide(),t("#monthly-subscription-plan").hide(),t("#cmg-goadfree").hide(),t("body").addClass("subscribed-users")):t("body").removeClass("subscribed-users"),null!==getCookie("cmg_l")&&t("#block-nodepagespromouserprofiles-2").hide(),null!==getCookie("cmg_l")&&t("#block-nodepagespromouserprofiles-2").hide(),i(".user-login-form"),i(".user-pass"),i(".user-register-form")})),cmatgameSearchGames="",window.switchcount=0,jQuery.ajaxSetup({async:!1});var r,s,c,l="/sites/default/files/cmatgame_games_with_levels.json";void 0!==drupalSettings.cmg_sjpath&&(l=drupalSettings.cmg_sjpath),jQuery.getJSON(l,(function(e,t,a){void 0!==e&&e.length>=1&&(cmatgameSearchGames=e)})),window.searchGamesById=function(a){if("undefined"!=typeof cmatgameSearchGames&&cmatgameSearchGames.length){var o=t.grep(cmatgameSearchGames,(function(e,t){return e.id==a}));return"undefined"!=o&&0!=o.length||"object"!=("undefined"==typeof gameDefData?"undefined":e(gameDefData))||"object"!=e(gameDefData[0])||"undefined"==gameDefData[0].id||parseInt(gameDefData[0].id)!=a||(o=gameDefData),o}},window.debugOut=function(e){u&&console.log(e)},window.removeAdSwfJWPLayer=function(){},window.setCookie=function(e,t,a){var o=new Date;o.setTime(o.getTime()+a);var n="expires="+o.toUTCString();document.cookie=e+"="+t+"; "+n+"; path=/; domain=."+window.location.host},window.getCookie=function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null},t("form").attr("autocomplete","off"),t(".mobile-device .game-item").on("click",(function(e){e.preventDefault(),window.location.href=t(this).find("a").attr("href")})),window.isUserValidFreeUserOrSubscriber=function(){return null!=getCookie("cmg_uid")&&(null!=getCookie("cmg_sx")||null!=getCookie("cmg_fx"))},window.get_premium_access_leg_desc=function(e){var t="";switch(e){case"4c044106":t="Unlimited_Playlist";break;case"5b8689c9":t="Get_Premium_Access";break;case"be77d560":t="Freemium_Create_Account";break;case"6b3b61dc":t="Freemium_Profile_Customize";break;case"b2df5a33":t="Anon go_ad_free_no_trial";break;case"2efa4bc4":t="Anon pre_roll";break;case"849ef809":t="BigScreen Anon watch_or_join";break;case"0735a1f2":t="Anon support_cmg_overlay";break;case"791c674d":t="Anon ad_blocker";break;case"a1ca2f3b":t="Anon right_rail";break;case"6ea95de6":t="Anon hp_promo_bar";break;case"0c5a2b5b":t="Freemium go_ad_free_no_trial";break;case"bd07c4e6":t="Freemium pre_roll";break;case"e180e28d":t="BigScreen Freemium watch_or_join";break;case"d61242ac":t="Freemium support_cmg_overlay";break;case"b0e0a25a":t="Freemium ad_blocker";break;case"780ef8a3":t="Freemium right_rail";break;case"89bee87a":t="Freemium hp_promo_bar";break;case"553bdf22":t="Unified Premium Landing";break;case"9a55d86e":t="Major Promotions";break;case"67361110":t="Unified Freemium Landing";break;case"1bb008bd":t="Anon Big Screen";break;case"7859e605":t="Freemium Big Screen"}return t},t('[data-toggle="popover"]').length&&"function"!=typeof t('[data-toggle="popover"]').popover&&t('[data-toggle="popover"]').popover({html:!0}),t(".popover-dismiss").length&&"function"!=typeof t(".popover-dismiss").popover&&t(".popover-dismiss").popover({trigger:"focus"}),window.location.href.indexOf("/blog/")>-1&&t(".node__meta").prepend('<div class="back-to-blog"><a href="/blog">Back to Blog</a><div>'),t.fn.outside=function(e,a){return this.each((function(){t(this);var o=this;t(document).bind(e,(function n(i){i.target===o||t.contains(o,i.target)||(a.apply(o,[i]),o.parentNode||t(document.body).unbind(e,n))}))}))},window.search_random_games=function(e,t){return e.filter((function(e){return Object.keys(t).every((function(a){return e[a]==t[a]}))}))},window.redirect_random_games=function(){jQuery(".menu-random > a").attr("href","javascript:void(0)"),jQuery(".menu-random > a").click((function(){if(cmatgameSearchGames.length){var e=cmatgameSearchGames,t=JSON.stringify(e),a=search_random_games(JSON.parse(t),{rand:1}),o=a[Math.floor(Math.random()*a.length)];void 0!==o&&void 0!==o.alias&&""!==o.alias&&(window.location=window.location.protocol+"//"+window.location.hostname+o.alias+"?random_true")}}))},t(document).ready((function(){redirect_random_games()})),navigator.sayswho=(s=navigator.userAgent,c=s.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(c[1])?"IE "+((r=/\brv[ :]+(\d+)/g.exec(s)||[])[1]||""):"Chrome"===c[1]&&null!=(r=s.match(/\b(OPR|Edge)\/(\d+)/))?r.slice(1).join(" ").replace("OPR","Opera"):(c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(r=s.match(/version\/(\d+)/i))&&c.splice(1,1,r[1]),c.join(" "))),window.checkVersionBrowser=function(){var e,t=navigator.userAgent,a=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(a[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===a[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(a=a[2]?[a[1],a[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&a.splice(1,1,e[1]),a.join(" "))},debugOut(navigator.sayswho),window.flashDetectionMessage=function(){t(".no-flash").css("display","none"),t("#afg_container").css("display","none").html("<div></div>");var e=checkVersionBrowser().split(" ");if(t("#flash-icon-title-heading").show(),"Chrome"==e[0]&&e[1]>=85||"Firefox"==e[0]&&e[1]>80||"Safari"==e[0]){t("#newFlashDetectHtml").show();var a=t(".game-xp-bar-immerse-button");void 0!==a&&null!=a&&a.hide(),t("#block-carouselingamedetailpage").hide(),drupalSettings.cmatgame.swfembed&&(debugOut("flash"),t("#flash-icon-aligned-title").html('<span class="icon-gamethumbnail"> </span>'))}else t("#no-flash-overlay").show();if(t(".load-wrap").hide(),t("#continue-container").hide(),t("#afg_container").css({"margin-bottom":"0px"}),t(".unlock-link").length&&t("#subscriber-banner").hide(),"Chrome"==e[0]&&e[1]>=85){t(".game-field-wrapper #no-flash-overlay a img").attr("src","/themes/custom/coolmath/assets/images/enable-flash-chrome.png"),t("body.small-game-item").length?t(".game-field-wrapper #no-flash-overlay").css({position:"relative"}):t(".game-field-wrapper #no-flash-overlay").css({position:"relative",top:"25px"});/0-isoball|0-isoball-2|liquid-measure-3|0-isoball-x1|0-isoball-3/.test(document.location.pathname)&&(t(".game-field-wrapper #no-flash-overlay").css({position:"relative",top:"10px"}),t(".game-field-wrapper #no-flash-overlay img, .game-field-wrapper #no-flash-overlay .bottom-text p a").css({position:"relative",top:"20px"}));/0-slime-laboratory|0-slime-laboratory-2/.test(document.location.pathname)&&t(".game-field-wrapper #no-flash-overlay").css({position:"relative",top:"0px"})}},window.remove_anon_user_blocks=function(){var e=getCookie("cmg_sx");null!=e&&t("body").addClass("subscribed-users logged-in"),t(".pane-bean-subscriber-promo").length<=0&&t("body").hasClass("logged-in")&&t("body").addClass("subscribed-users"),t(".panel-pane.pane-block.pane-bean-coolmath-header").replaceWith(""),t(".panel-pane.pane-block.pane-bean-game-page-no-ads-promo").replaceWith(""),t(".pane-bean-subscriber-promo a").css({display:"inline-block",visibility:"hidden"}),t(".homepage-remove-ads-1").replaceWith(""),t(".pane-bean-game-page-no-ads-promo").replaceWith(""),t(".header-wrapper .item-list .panel-pane.pane-cmatgame-advertisement-cm-g-homepage-728-90").removeClass("top-728x90 pane-cmatgame-advertisement-cm-g-homepage-728-90"),t(".header-wrapper .item-list .panel-pane.pane-cmatgame-advertisement-cm-g-otherpages-728-90").removeClass("top-728x90 pane-cmatgame-advertisement-cm-g-otherpages-728-90"),t("body.front .panel-pane .pane-content .global-wrapper-content .new-games .link-more-wrapper").css("margin-bottom","53px"),t(".pane-bean-new-go-ad-free").length&&t(".pane-bean-new-go-ad-free").hide(),t(".homepage-signup-promo").length&&t(".homepage-signup-promo").hide(),t(".cmg-right-rail-signup-promo-2").length&&null!==getCookie("cmg_sx")&&t(".cmg-right-rail-signup-promo-2").parent().remove(),t(".cmg-right-rail-signup-promo-3").length&&null!==getCookie("cmg_sx")&&t(".cmg-right-rail-signup-promo-3").parent().remove()},window.cmg_rafgp=function(){("undefined"!=typeof freeTrialUser&&freeTrialUser||"undefined"!=typeof cmg_school_whitelisted&&cmg_school_whitelisted||"undefined"!=typeof cmg_no_ads&&cmg_no_ads)&&(t(".ad-wrapper").each((function(){t(this).replaceWith("")})),t(".pane-bean-new-go-ad-free").replaceWith(""),t(".panel-pane.pane-block.pane-bean-coolmath-header").replaceWith(""),t(".pane-cmatgame-advertisement-cm-g-otherpages-300x250-top").replaceWith(""),t(".homepage-remove-ads-1").replaceWith(""),t(".adobe-analytics-sub-experience").css("display","none"),t(".page-1-unlockable-game-list .view-header").replaceWith(""))},("undefined"!=typeof freeTrialUser&&freeTrialUser||"undefined"!=typeof cmg_school_whitelisted&&cmg_school_whitelisted||"undefined"!=typeof cmg_no_ads&&cmg_no_ads)&&cmg_rafgp(),window.session_expired_handler=function(){if(null!==getCookie("cmg_exp")){setCookie("cmg_exp","false",-1e6);var e='<div class="messages--status messages error" style="margin-bottom: 70px;"><h2 class="element-invisible">Error message</h2>Hi – You’ve automatically been logged out of your Coolmath Games subscription. Your subscription allows you to access Coolmath Games from up to 3 different web browsers at once – and you’ve now exceeded that limit or you have been logged out from an another session. Please login again to access your subscription.</div>';t(".panel-pane.pane-pane-messages .pane-content").length?t(".panel-pane.pane-pane-messages .pane-content").html(e):t("#block-cmatgame-cmatgame-system-main").before(e)}},session_expired_handler(),window.getParameterByName=function(e){var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.href);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},window.testCMGStorage=function(){var e="cmgls";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!0}catch(e){return!1}},window.subscription_event_handler=function(){var e=/signup|premium-access|user\/[0-9]*\/subscription|myaccount/,a=/cmgsubl/;if("/thankyou"===window.location.pathname&&"undefined"!=typeof subscriberLeg&&("undefined"!=typeof freeTrialUser&&freeTrialUser&&"Default Leg"!==subscriberLeg||a.test(location.search))){var o=/cmgtypl/;if((a.test(location.search)||!o.test(location.search))&&(!testCMGStorage()||testCMGStorage()&&null===localStorage.getItem("cmgtypl"))){var n=(new Date).getHours(),i="Subscription success",r=getParameterByName("cmgsubl");2===r||"2"===r?(i="Subscription Reactivation success",trackEvent("Subscription Reactivation",i,document.title),trackEvent("Subscription Reactivation",i+" hour",n),ga4_trackEvent("subscription_signup",["subscription_category","promotion_type","subscription_action"],[subscriberLeg,"",i])):(trackEvent("Premium Subscription "+subscriberLeg,i,document.title),trackEvent("Premium Subscription "+subscriberLeg,i+" hour",n),ga4_trackEvent("subscription_signup",["subscription_category","promotion_type","subscription_action"],[subscriberLeg,"",i]));var s=!1;"function"==typeof getCookie&&null!==getCookie("cmg_go_adfree")&&(s=!0),s?(trackGoalVirtualPV("/virtual/subscription-adfree-thankyou"),setCookie("cmg_go_adfree","",0)):trackGoalVirtualPV("/virtual/subscription-overlay-thankyou"),localStorage.setItem("cmgtypl",!0);var c="cmgtypl="+(new Date).getTime();location.search&&!o.test(location.search)?c=location.search+"&"+c:location.search&&(c=location.search),history.replaceState("Thank you","Thank you",location.pathname+c)}}else if("/signup/thank-you"===window.location.pathname){if((o=/cmgtypl/).test(location.search)&&(!testCMGStorage()||testCMGStorage()&&null===localStorage.getItem("cmgtypl"))){n=(new Date).getHours(),i="Premium Access Signup success";var l=getParameterByName("cmgtypl"),u=get_premium_access_leg_desc(l);""===u&&(u="GoAdFree"),2===r||"2"===r?(i="Subscription Reactivation success",trackEvent("Subscription Reactivation",i,document.title),trackEvent("Subscription Reactivation",i+" hour",n),ga4_trackEvent("subscription_signup",["subscription_category","promotion_type","subscription_action"],[subscriberLeg,"",i])):(trackEvent("Premium Access Subscription "+u,i,document.title),trackEvent("Premium Access Subscription "+u,i+" hour",n),ga4_trackEvent("subscription_signup",["subscription_category","promotion_type","subscription_action"],[subscriberLeg,"",i]));s=!1;"function"==typeof getCookie&&null!==getCookie("cmg_go_adfree")&&(s=!0),s?(trackGoalVirtualPV("/virtual/subscription-adfree-thankyou"),setCookie("cmg_go_adfree","",0)):trackGoalVirtualPV("/virtual/subscription-overlay-thankyou"),localStorage.setItem("cmgtypl",!0);c="cmgtypl="+(new Date).getTime();location.search&&!o.test(location.search)?c=location.search+"&"+c:location.search&&(c=location.search),history.replaceState(document.title,document.title,location.pathname+c)}}else if(/profile|premium-access/.test(location.pathname)&&/cmgtypl/.test(location.search))signupType=getParameterByName("cmgtypl"),trackEvent("XP SignUp Page","Submission successful",signupType);else if(e.test(location.pathname)&&testCMGStorage()&&null!==localStorage.getItem("cmgtypl"))localStorage.removeItem("cmgtypl");else if("undefined"!=typeof freeTrialUser&&freeTrialUser&&e.test(location.pathname)&&"undefined"!=typeof subscriberLeg&&"Default Leg"!==subscriberLeg&&t(".messages--error.messages.error").length){var m=t(".messages--error.messages.error").text();m=(m=m.replace(/Error message/gm,"")).replace(/(\r\n|\n|\r)/gm,""),trackEventNonInteractive("Premium Subscription "+subscriberLeg,"Subscription error",m)}!t("form#user-register-form").length&&navigator.cookieEnabled&&localStorage.getItem("cmgsignupname")&&localStorage.removeItem("cmgsignupname")},jQuery(document).ready((function(){"function"==typeof ga4_trackEvent?subscription_event_handler():setTimeout((function(){"function"==typeof ga4_trackEvent&&subscription_event_handler()}),1e3)})),window.get_premium_access_leg=function(){var e="";e="^(/premium-access/)";pPalReg=new RegExp("^(/profile/premium-access/)","i"),palReg=new RegExp(e,"i");var t=location.pathname.split("/");return"/signup/thank-you"===window.location.pathname&&/cmgtypl/.test(location.search)?e=getParameterByName("cmgtypl"):pPalReg.test(location.pathname)?e=t.length>=4?t[3]:"b2df5a33":palReg.test(location.pathname)&&(e=t.length>=3?t[2]:"b2df5a33"),e},window.setSessionCookie=function(e,t){document.cookie=e+"="+t+"; path=/; domain=."+window.location.host},t(document).on("click","#cmg-goadfree",(function(e){e.preventDefault(),setSessionCookie("cmg_go_adfree",!0);var t="/premium-access";getCookie("cmg_fx")&&(t="/profile/premium-access");var a="";if("function"==typeof getCookie&&null!==getCookie("cmg_fx")&&null===getCookie("cmg_sx")?(t="/profile/premium-access/0c5a2b5b/"+getCookie("cmg_fx").toLowerCase(),a=get_premium_access_leg_desc("0c5a2b5b")):(t="/premium-access/b2df5a33",a=get_premium_access_leg_desc("b2df5a33")),"function"==typeof get_signup_abtest_variant_3&&(t+=get_signup_abtest_variant_3()),trackEvent("Premium Subscription - "+a,"Go Ad-Free button clicked",document.title),ga4_trackEvent("subscription_promotion_click",["promotion_type","promotion_category","promotion_name"],[a,"Go Ad-Free Monthly Subscription","HeaderNav"]),trackGoalVirtualPV("/virtual/subscription-adfree-click"),"en"==drupalSettings.language)var o=t;else o="/"+drupalSettings.language+t;window.location.href=window.location.protocol+"//"+window.location.host+o})),window.premium_access_event_handler=function(){sLeg=get_premium_access_leg_desc("5b8689c9"),trackEvent("Premium Subscription - "+sLeg,"Premium Access button clicked",document.title),trackGoalVirtualPV("/virtual/premium-access-click"),setSessionCookie("cmg_premium_access",!0)},window.isPremiumUser=function(){var e=getCookie("cmg_sx"),t=!1;return null!=e&&(t=!0),t},window.getcmguserstatus=function(a,o){return url="/ajax/subscriber/status/"+a+"/"+a+"?"+(new Date).getTime(),void 0!==o&&""!==o&&null!==o&&(url="/ajax/subscriber/status/"+a+"/"+o+"?"+(new Date).getTime()),status=0,t.getJSON(url,(function(o){m=getCookie("cmg_sx"),void 0!==e(o.sx)&&o.sx===a&&void 0!==e(o.st)&&o.st&&void 0!==e(m)&&""!==m&&null!==m&&(status=1,t("body").removeClass("not-logged-in"),t("body").addClass("subscribed-users"),t("body").addClass("logged-in"),t("body").removeClass("not-active-user"),t("body").addClass("active-user"),t("div[id^='block-coolmath-ads']").each((function(){t(this).replaceWith("")})),t("div[id^='block-ads']").each((function(){t(this).replaceWith("")})),t(".field-game").length&&(removeAdSwfJWPLayer(),t("#subscriber-banner").replaceWith('<div id="subscriber-banner" class="adobe-analytics-sub-unlock"><a onclick="unlockAllLevels();" class="unlock-link">click-to-unlock</a></div>')),remove_anon_user_blocks()),cmg_ll=getCookie("cmg_l"),void 0!==("undefined"==typeof cmg_ll?"undefined":e(cmg_ll))&&""!==cmg_ll&&null!==cmg_ll&&Drupal.behaviors.cmatgame_subscriber_behavior.user_loginbar_update()})),status},window.splashmathclick=function(){trackEvent("SplashMath Promo","Clicked",document.title),window.location.href="https://www.splashmath.com"};var u=0;"function"==typeof getParameterByName&&""!==getParameterByName("debug")&&(u=getParameterByName("debug")),window.debug_sid=function(){(u||"function"==typeof getParameterByName&&""!==getParameterByName("debug"))&&t("#debug-sid").removeClass("hidden")},window.preroll_signup_bottom_image_handler=function(){trackEvent("Preroll Signup Clicked","Preroll Signup Bottom Image",document.title)},window.checkadsDivEmpty=function(){t(".page-frontpage .block-region-supporting > .block").each((function(){t(this).find(".ad-wrapper > div").is(":empty")&&t(this).find(".ad-wrapper > div").parents(".block-adsresponsive1colhome300x250second").addClass("empty")}))},cmg_pmtd_regex=/coolmathgames\.local$|coolmathgames\.com$/,cmg_pmtd="https://www.coolmathgames.com",cmg_pmtd_regex.test(location.origin)&&(cmg_pmtd=location.origin);document.documentElement.clientWidth;window.addEventListener("resize",(function(){document.documentElement.clientWidth;t("body").hasClass("immersiveActive")&&adjustWidthHeightGame(),t("body").hasClass("isFullScreen")&&adjustWidthHeightGame(),t("body").find("#immersiveModal").length&&adjustWidthHeightModalGame(!0),checkadsDivEmpty()}),!1),/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&t(document).delegate(".game-item","click",(function(){window.location=t(this).find("a").attr("href")})),isUserValidFreeUserOrSubscriber()?t(".login-signup-container").hide():t(".login-signup-container").show(),checkadsDivEmpty(),"en"!=drupalSettings.language&&setCookie("cmg_translation",drupalSettings.language),window.cmg_view_default_lang_site=function(){event.preventDefault();var e=null!==getCookie("cmg_translation")?getCookie("cmg_translation"):"es";setCookie("cmg_translation","def"),/^(es|pt\-br|fr|it|hi|vi|de|zh\-hans|fil)?/.test(e)&&trackEvent("Translation site - "+e,"view site in english link clicked",document.title),location.pathname=="/"+e?document.location="/":"category"==jQuery("link[hreflang='"+e+"']").data("type")||"playlist"==jQuery("link[hreflang='"+e+"']").data("type")||"game_families"==jQuery("link[hreflang='"+e+"']").data("type")?window.location=jQuery("link[hreflang='en']").attr("href"):document.location=location.pathname.replace("/"+e+"/","/")},window.profileRedirect=function(){var e=localStorage.getItem("userprofile");localStorage.setItem("userprofile",JSON.stringify(e));var t="";"en"==drupalSettings.language?(window.location,t=null!==getCookie("cmg_fx")?"/profile/"+e.publicname:"/login"):(drupalSettings.language,t=null!==getCookie("cmg_fx")?drupalSettings.language+"/profile/"+e.publicname:NaN+drupalSettings.language+"/login"),window.location.href=window.location.protocol+"//"+window.location.host+t},window.myFunction=function(){trackEvent("Popover login click","login link clicked",document.title),window.location="/login?destination="+window.location.pathname},window.popover_signup_page=function(){trackEvent("Popover signup click ","signup link clicked",document.title)},window.location.href.indexOf("?random_true")>-1&&t(".menu_random").addClass(" active"),abTestCookie=getCookie("new-ab-test-cookie"),"true"==abTestCookie&&removeAdSwfJWPLayer(),"true"!=abTestCookie||null!=("undefined"==typeof preRollCookie?"undefined":e(preRollCookie))&&"undefined"!=typeof preRollCookie||setCookie("new-ab-test-cookie","false","1800000"),abTestCookie_1=getCookie("no-refresh-cookie"),"true"!=abTestCookie_1||null!=("undefined"==typeof noRefreshCookie?"undefined":e(noRefreshCookie))&&"undefined"!=typeof noRefreshCookie||setCookie("no-refresh-cookie","false","1800000");var m=getCookie("cmg_sx");(null===m?null!==getCookie("GDPR")&&null==getCookie("GDPR_All")&&t(".field-game").length&&removeAdSwfJWPLayer():null!==m&&(t("div[id^='block-coolmath-ads']").each((function(){t(this).replaceWith("")})),t("div[id^='block-ads']").each((function(){t(this).replaceWith("")})),t(".ad-wrapper").each((function(){t(this).replaceWith("")})),(t(".field-game").length||t("#swfgame").length)&&removeAdSwfJWPLayer(),remove_anon_user_blocks()),t(".profiles-promo").length&&null!==getCookie("cmg_fx")&&t(".profiles-promo").parent().remove(),null!=function(){var t;try{t=window.ActiveXObject&&!1!==new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){t=!1}return void 0!==navigator.plugins&&"object"==e(navigator.plugins["Shockwave Flash"])||t}())&&(null!=localStorage.getItem("flash_disabled")&&("undefined"!=typeof __gaTracker&&__gaTracker("send",{hitType:"event",eventCategory:"Flash Status",eventAction:"Flash Re Enabled",eventLabel:document.title,eventValue:"0",nonInteraction:1}),localStorage.removeItem("flash_disabled")));function g(e){t(".menu-search-bar").show(),t(".menu-search-bar").length>=1&&t(".menu-search-bar")[0].focus(),t(".search-results-container").hide(),t(".search-results-container li").show(),e.stopPropagation(),null==getCookie("cmg_l")&&loadJs("searchJs","/themes/custom/coolmath/assets/js/coolmath.search.js")}window.addEventListener("keydown",(function(e){32===e.keyCode&&e.target===document.body&&e.preventDefault()})),t(".pane-bean-new-go-ad-free").length&&t(".pane-bean-new-go-ad-free").is(":visible")&&trackGoalVirtualPV("/virtual/subscription-adfree-impression"),t(".popular-cat-block").length&&t(".popular-cat-block").parents(".block-block-content").addClass("popularCatBlock"),t(document).on("click","#cmatgame-search-block-form label",(function(e){g(e)})),t(document).ready((function(){t("#cmatgame-search-block-form [name='search_bar']").on("focus",(function(e){t("body").addClass("search-expanded"),g(e),t(".menu-search-bar").attr("placeholder",Drupal.t("Search by game name"))})),t(".menu-search-bar").blur((function(){t(this).attr("placeholder",Drupal.t("Search"))}))})),window.cmg_get_lpg=function(){var t,a="";if(navigator.cookieEnabled&&(null!=localStorage.getItem("userprofile")&&"function"==typeof generateMyGamesData&&"object"==e(t=""!=(t=localStorage.getItem("userprofile"))&&"0"!=t?JSON.parse(t):[])&&t.mygameslist&&t.mygameslist.length)){var o=generateMyGamesData(t.mygameslist),n=sortMyGamesDataByTimestamp(o);n.splice(10),a=n}return a},null!==getCookie("cmg_l")&&""!==getCookie("cmg_l")||"optimized"!==document.documentElement.getAttribute("rel")?loadJs("searchJs","/themes/custom/coolmath/assets/js/coolmath.search.js"):t(document).on("click",".page-header-mobile .navbar-toggler",(function(e){loadJs("searchJs","/themes/custom/coolmath/assets/js/coolmath.search.js")})),t(".hover-video").each((function(){var e=t(this).find("video");null!=e&&e.attr("src")&&t(this).on("mouseenter",(function(){e[0].play(),t(this).addClass("hovered")})).on("mouseleave",(function(){t(this).removeClass("hovered"),e[0].pause(),e[0].currentTime=0}))}))}(jQuery),window.p_Levels={level_01:Drupal.t("STARRY-EYED<br/>ROOKIE TO WATCH"),level_02:Drupal.t("SPRING-LOADED <br/>LEVEL ASCENDER"),level_03:Drupal.t("SEMI-PRO NINJA <br/>UNICORN GROOMER"),level_04:Drupal.t("ALL-STAR NINJA<br/>UNICORN TRAINER"),level_05:Drupal.t("DIESEL-FUELED <br/>XP MACHINE"),level_06:Drupal.t("SOLAR-POWERED<br/>XP MACHINE"),level_07:Drupal.t("MODESTLY HEROIC<br/>CHAMPION"),level_08:Drupal.t("HEROICALLY MODEST<br/>CHAMPION"),level_09:Drupal.t("GALAXY COMMANDER<br/>PART-TIME UNICORN GROOMER"),level_10:Drupal.t("ABSOLUTELY SUPERCOOL<br/>COOLMATH GAMER")},window.logout_tr=Drupal.t("Log Out"),window.myPage_tr=Drupal.t("My Page"),window.likemsgU=Drupal.t("You haven't given a like to any games yet. Look for the thumbs up icon on game pages to add them here!"),window.likemsgV=Drupal.t("This user has not given a Like to any games yet"),window.profileBtnTxt=Drupal.t("Get a Premium Profile"),window.noTxt=Drupal.t("No"),window.timerOfftxt=Drupal.t("Turn Timer Off"),window.timerOntxt=Drupal.t("Turn Timer On"),window.viewAlltxt=Drupal.t("View All"),jQuery(document).ready((function(){var e=localStorage.getItem("userprofile");e=JSON.parse(e);window.location.pathname;var t="",a=window.location.pathname;if("en"!=drupalSettings.language)var o=a.split("/")[3];else o=a.split("/")[2];var n=getCookie("cmg_l");$(".playlistcontainer").each((function(){var a=$(this).attr("data-id"),i=$(this).attr("data-alias");t="",t=null!==n&&e.publicname.toLowerCase()==o.toLowerCase()?"en"!=drupalSettings.language?"/"+drupalSettings.language+"/playlist/"+a+"/edit":"/playlist/"+a+"/edit":"en"!=drupalSettings.language?location.origin+"/"+drupalSettings.language+i:location.origin+i,$(this).find(".myplaylist-title a").attr("href",t),$(this).find(".playlist-profile-image a").attr("href",t)}))})),window.continue_not_available_in_your_area_hexanaut_images=function(){window.location!==window.parent.location&&"function"==typeof getParameterByName?window.parent.postMessage("not-available-in-your-area-hexanaut",cmg_pmtd):event&&event.currentTarget&&void 0!==jQuery(event.currentTarget).attr("href")?window.location=jQuery(event.currentTarget).attr("href"):event&&event.currentTarget&&void 0!==jQuery(event.currentTarget).find("a").attr("href")?window.location=jQuery(event.currentTarget).find("a").attr("href"):window.location="/"},window.continue_not_available_in_your_area_signup_images=function(){window.location!==window.parent.location&&"function"==typeof getParameterByName?window.parent.postMessage("not-available-in-your-area-signup",cmg_pmtd):event&&event.currentTarget&&void 0!==jQuery(event.currentTarget).attr("href")?window.location=jQuery(event.currentTarget).attr("href"):event&&event.currentTarget&&void 0!==jQuery(event.currentTarget).find("a").attr("href")?window.location=jQuery(event.currentTarget).find("a").attr("href"):window.location="/"},window.$=jQuery,function(e){jQuery((function(){e(".navbar-right .menu-language > a").on("click",(function(t){t.preventDefault(),e(this).parent().toggleClass("active")})),e(".navbar-right .menu-language").outside("click",(function(){e(this).removeClass("active")}))}))}(jQuery)})();;
({546:function(){function e(a){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(a)}var a=getCookie("cmg_uid"),l=Drupal.t("Log Out");if(Drupal.t("My Page"),isCurrentUserAVisitor=!1,jQuery("input#edit-submit").click((function(){null!==document.getElementById("user-follow-form")&&document.getElementById("user-follow-form").reset()})),window.checkProfileVisit=function(){profilevisited=parseInt(localStorage.getItem("profilePgVisit")||0),localStorage.setItem("profilePgVisit",++profilevisited)},userprofile="",window.cmg_userprofile_api_settings=function(){var e=!1;void 0!==drupalSettings.userprofile&&void 0!==drupalSettings.userprofile.profile_pages_prod_test&&1==drupalSettings.userprofile.profile_pages_prod_test&&(e=!0),"www.coolmathgames.com"!=window.location.host&&void 0!==e&&e?(apiServerURL="https://api.coolmathgames.com/userProfileProd",apiLeaderboardURL="https://api.coolmathgames.com/userProfileLeaderboardProd",apiProfileEvent="https://api.coolmathgames.com/userProfileEventsProd"):"dev.coolmathgames.com"==window.location.host||"dev-edit.coolmathgames.com"==window.location.host||"dev2.coolmathgames.com"==window.location.host||"dev3.coolmathgames.com"==window.location.host?(apiServerURL="https://api.coolmathgames.com/userProfile",apiLeaderboardURL="https://api.coolmathgames.com/userProfileLeaderboard",apiProfileEvent="https://api.coolmathgames.com/userProfileEventsLocal"):"stage.coolmathgames.com"==window.location.host||"stage-edit.coolmathgames.com"==window.location.host||"stage2.coolmathgames.com"==window.location.host||"stage2-edit.coolmathgames.com"==window.location.host?(apiServerURL="https://api.coolmathgames.com/userProfileStage",apiLeaderboardURL="https://api.coolmathgames.com/userProfileLeaderboardStage",apiProfileEvent="https://api.coolmathgames.com/userProfileEventsStage"):"www.coolmathgames.com"==window.location.host||"edit.coolmathgames.com"==window.location.host||"d9-edit.coolmathgames.com"==window.location.host?(apiServerURL="https://api.coolmathgames.com/userProfileProd",apiLeaderboardURL="https://api.coolmathgames.com/userProfileLeaderboardProd",apiProfileEvent="https://api.coolmathgames.com/userProfileEventsProd"):(apiServerURL="https://api.coolmathgames.com/userProfileLocal",apiLeaderboardURL="https://api.coolmathgames.com/userProfileLeaderboardLocal",apiProfileEvent="https://api.coolmathgames.com/userProfileEventsLocal")},"/profile/following"==window.location.pathname&&isUserValidFreeUserOrSubscriber()&&(userprofile=localStorage.getItem("userprofile"),null!=userprofile&&(userprofile=JSON.parse(userprofile),void 0!==userprofile.myfollowings&&displayUserFollowingDataOnFollowingPage(userprofile.myfollowings))),window.display_user_profile_block=function(){var e=localStorage.getItem("userprofile");if("en"==drupalSettings.language)var l="/profile/";else l="/"+drupalSettings.language+"/profile/",drupalSettings.language;null!=e&&(e=JSON.parse(e)).user_level;var t="";null!=e&&void 0!==e.avatarimage&&(t=e.avatarimage);var r=null!=e&&e.publicname?e.publicname:"";null==e&&""==r&&"function"==typeof getCookie&&null!=getCookie("cmg_fx")&&(r=getCookie("cmg_fx"));var s=r.toLocaleLowerCase();location.pathname!==l+"subscribe"&&location.pathname!==l+"premium-access"||"undefined"==typeof premium_nickname||null==premium_nickname||""===premium_nickname?"undefined"!=typeof user_nickname&&""!=user_nickname&&getCookie("cmg_fx")==user_nickname&&(s=(r=user_nickname).toLocaleLowerCase()):r=premium_nickname,location.pathname!==l+"subscribe"&&location.pathname!==l+"premium-access"||"undefined"==typeof premium_avatar||null==premium_avatar||""===premium_avatar||(t=premium_avatar),"/profile/subscribe"!==location.pathname&&"/profile/premium-access"!==location.pathname||"undefined"==typeof premium_avatar||null==premium_avatar||""===premium_avatar?"undefined"!=typeof user_avatar_path&&""!==user_avatar_path&&"undefined"!=typeof user_id&&void 0!==a&&user_id==a?avatar_path=user_avatar_path:avatar_path=decodeURIComponent(t):avatar_path=decodeURIComponent(premium_avatar);var i='\n  <div class="welcome-box"><div class="user-profile-promo">\n    <div class="user-avatar-info avatar">\n      <div class="user-avatar">\n        <a href="'.concat(l+s,'">\n          <img src="').concat(avatar_path,'" alt="').concat(r,'" />\n        </a>\n      </div>\n      <div class="level">\n        <a class="nav-link text-center">\n          <span class="badge badge-primary">1</span>\n        </a>\n      </div>\n    </div>\n    <div class="user-promo-info">\n      <div class="user-name">\n        <a href="').concat(l+s,'">').concat(r,'</a>\n      </div>\n      <div class="progress user-xp"></div>\n      <div class="user-level-info">\n        <div class="user-level">').concat(Drupal.t("Level"),' <span>1</span></div>\n        <div class="user-total-xp"></div>\n      </div>\n      <span class="user-level-up badge badge-success"></span>\n    </div>\n  </div>\n  <a class="profile-edit-button" href="').concat(l+s+"/edit",'">\n    <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17" fill="none">\n      <path d="M12.0282 16.6901H1.66197C0.741784 16.6901 0 15.9484 0 15.0282V4.66197C0 3.74178 0.741784 3 1.66197 3H4.65728C4.97653 3 5.23944 3.26291 5.23944 3.58216C5.23944 3.90141 4.97653 4.16432 4.65728 4.16432H1.66197C1.38967 4.16432 1.17371 4.38028 1.17371 4.65258V15.0282C1.17371 15.3005 1.38967 15.5164 1.66197 15.5164H12.0282C12.3005 15.5164 12.5164 15.3005 12.5164 15.0282V12.3427C12.5164 12.0235 12.7793 11.7606 13.0986 11.7606C13.4178 11.7606 13.6808 12.0235 13.6808 12.3427V15.0282C13.6808 15.9484 12.939 16.6901 12.0188 16.6901H12.0282Z" fill="white"></path>\n      <path d="M9.02355 12.9248H4.65735C4.33811 12.9248 4.0752 12.6619 4.0752 12.3426V7.96704C4.0752 7.80742 4.14092 7.66657 4.24421 7.5539L10.216 1.58207C10.9954 0.802723 12.2536 0.802723 13.0329 1.58207L15.4179 3.94826C15.7935 4.32385 16.0095 4.83089 16.0095 5.35671C16.0095 5.89192 15.8029 6.38958 15.4273 6.76516L9.44609 12.7464C9.33341 12.8591 9.18318 12.9154 9.03294 12.9154L9.02355 12.9248ZM5.23951 11.7511H8.77942L14.5822 5.93887C14.7419 5.77925 14.8264 5.57268 14.8264 5.35671C14.8264 5.14075 14.7419 4.93418 14.5822 4.77455L12.1973 2.40836C11.878 2.08911 11.3522 2.08911 11.0329 2.40836L5.2489 8.21117V11.7511H5.23951Z" fill="white" style="/* fill: white; *//* stroke: white; *//* stroke-width: 3px; *//* stroke-linecap: square; */"></path>\n    </svg>\n  </a>\n  </div>\n  ');jQuery(".page-header, .page-header-mobile").find(".welcome-box").replaceWith(i);var o='<ul>\n    <li><a href="'.concat(l+s,'" title="').concat(Drupal.t("My Profile"),'">').concat(Drupal.t("My Profile"),'</a></li>\n    <li><a href="').concat(l+s+"#tab5",'" title="').concat(Drupal.t("My Favorites"),'">').concat(Drupal.t("My Favorites"),'</a></li>\n    <li><a href="').concat(l+s+"/edit",'" title="').concat(Drupal.t("Customize"),'">').concat(Drupal.t("Customize"),'</a></li>\n    <li><a href="').concat(l+"premium-access/5b8689c9/"+s,'" title="').concat(Drupal.t("Go Ad-Free"),'">').concat(Drupal.t("Go Ad-Free"),'</a></li>\n    <li><a href="').concat(l+"account-settings",'" title="').concat(Drupal.t("Account Settings"),'">').concat(Drupal.t("Account Settings"),'</a></li>\n    <li><a href="/user/logout" onClick="Drupal.behaviors.cmatgame_subscriber_behavior.user_logout(event); return false;" class="logout" title="').concat(Drupal.t("Log Out"),'">').concat(Drupal.t("Log Out"),"</a></li>\n  </ul>");jQuery(".user-promo-menu").html(o),jQuery(".navbar-right a.login-link").replaceWith('<a class="profile-image" href="'.concat(l+s,'" title="').concat(Drupal.t("My Profile"),'"><img src="').concat(avatar_path,'" alt="').concat(r,'" /></a>')),jQuery(".tabbed-navbar").find(".icon-profile").html("<img src='"+avatar_path+"' alt='"+r+"' width='18' height='18' />").css("background","transparent"),display_user_profile_progressbar()},window.profile_switch_userstyle=function(){if(isUserValidFreeUserOrSubscriber()){if(userprofile=localStorage.getItem("userprofile"),display_user_profile_block(),"/profile/subscribe"!==location.pathname&&"/profile/premium-access"!==location.pathname||"undefined"==typeof premium_nickname||null==premium_nickname||""===premium_nickname||(user_styleName=premium_nickname),"/profile/subscribe"!==location.pathname&&"/profile/premium-access"!==location.pathname||"undefined"==typeof premium_theme_path||null==premium_theme_path||""===premium_theme_path||(user_stylePath=premium_theme_path),("undefined"==typeof user_styleName||""==user_styleName||"undefined"==typeof user_stylePath||""==user_stylePath||!isCurrentUserAVisitor&&""!=getCookie("cmg_xps")&&user_styleName!=getCookie("cmg_xps"))&&(user_styleName=getCookie("cmg_xps"),user_stylePath=getCookie("cmg_xpp")),"undefined"!=typeof user_styleName&&null!=user_styleName&&""!==user_styleName&&null!=user_stylePath&&""!==user_stylePath){var e=[];e={name:decodeURIComponent(user_styleName),path:decodeURIComponent(user_stylePath)},0===switchcount&&(switchUserStyle(e),switchcount=1)}}else"undefined"!=typeof user_styleName&&null!=user_styleName&&""!==user_styleName&&null!=user_stylePath&&""!==user_stylePath&&(e=[],e={name:decodeURIComponent(user_styleName),path:decodeURIComponent(user_stylePath)},0===switchcount&&(switchUserStyle(e),switchcount=1))},jQuery(document).ready((function(){profile_switch_userstyle()})),window.retrieveUserProfileDataForAnonymousUsers=function(e){if(""!=cmgxpvisitedid&&cmgxpvisitedid==e){if(""!=typeof cmgxpvisitedid)return}else if(""!=cmgxpvisitedid)return;cmgxpvisitedid!=e&&(cmgxpvisitedid=e),cmg_userprofile_api_settings(),jQuery.ajaxSetup({async:!1}),jQuery.ajax({url:apiServerURL+"/getdata/"+e,type:"GET",data:{},success:function(e){var a="";e.Items&&void 0!==e.Items[0]&&e.Items[0].localStorage&&""!=e.Items[0].localStorage.S&&0==e.Items[0].localStorage.S.indexOf("userprofile=cmgocbcmgdquseridcmgdq")&&e.Items[0].localStorage.S.indexOf("cmgzip")<0?(y=e.Items[0].localStorage,a=(a=(a=cmg_deminify_gamelist(y.S)).replace(/cmgbb/g,"\\").replace(/cmgsqbr/g,"[").replace(/cmgcomma/g,",").replace(/cmgccb/g,"}").replace(/cmgocb/g,"{").replace(/cmgdq/g,'"').replace(/cmgeq/g,"=")).replace(/\\"/g,'"').replace(/""/g,'"')):e.Items&&void 0!==e.Items[0]&&e.Items[0].localStorage&&e.Items[0].localStorage.S.indexOf("cmgzip")>=0?a=y=cmg_decompress_data(e.Items[0].localStorage.S):(a=e.Items[0].localStorage.S,a=(a=cmg_deminify_gamelist(a)).replace(/'/g,'"')),visitorprofile="";for(var l=a.split("cmgsep"),t=0;t<l.length;t++)if(tmpData=l[t].split("="),isNaN(tmpData[1])||(tmpData[1]=parseInt(tmpData[1])),"userprofile"==tmpData[0]){visitorprofile=tmpData[1];break}}})},"undefined"!=typeof user_id)a=getCookie("cmg_uid"),user_id==a?isCurrentUserAVisitor=!1:(isCurrentUserAVisitor=!0,retrieveUserProfileDataForAnonymousUsers(user_id),userprofile=visitorprofile,$(".user-hud").find(".user-progress").hide(),$(".user-hud").find(".totals").hide());else if(null!=a){a=getCookie("cmg_uid");var t=getCookie("cmg_fx").toLowerCase()+"/following";pageUrl=$(location).attr("href");var r="";pageUrl.includes("/following")&&(varSplit=pageUrl.split("/profile/"),r=varSplit[1].toLowerCase()),isCurrentUserAVisitor=r!=t}else isCurrentUserAVisitor=!0;window.initializeUserprofileLocalStorage=function(){var e={userid:getCookie("cmg_uid"),lastplayedgame:0,mygameslist:[],user_level:1,progress_in_current_level:0,max_xp_in_current_level:100};null!=getCookie("cmg_fx")?e.publicname=getCookie("cmg_fx"):void 0!==drupalSettings.userprofile&&(e.publicname=drupalSettings.userprofile.publicname),void 0!==drupalSettings.userprofile&&-1!=drupalSettings.userprofile.avatarimage.indexOf("/sites/")&&(e.avatarimage=encodeURIComponent(drupalSettings.userprofile.avatarimage)),localStorage.setItem("userprofile",JSON.stringify(e))},window.display_user_profile_progressbar=function(){var e=localStorage.getItem("userprofile");if(null!=e){if((e=JSON.parse(e)).user_level>=50)var a="starbadge";else a="";if(e.user_level>100?user_level_cmg=100:user_level_cmg=e.user_level,"undefined"==typeof user_level_cmg&&(user_level_cmg=1),isCurrentUserAVisitor||jQuery(".user-hud .level").replaceWith('<div class="level level-'+user_level_cmg+" "+a+'"><a class="nav-link text-center"><span class="badge badge-primary">'+user_level_cmg+"</span></a></dev>"),jQuery(".welcome-box .level").replaceWith('<div class="level level-'+user_level_cmg+" "+a+'"><a class="nav-link text-center"><span class="badge badge-primary">'+user_level_cmg+"</span></a></dev>"),void 0!==e.max_xp_in_current_level){var l=e.max_xp_in_current_level,t=Math.floor(e.progress_in_current_level/l*100),r="";r=void 0===e.user_level?"0/100 "+Drupal.t("XP"):e.user_level<100?e.progress_in_current_level+"/"+l+" "+Drupal.t("XP"):Drupal.t("MAX LEVEL"),jQuery(".welcome-box .user-xp").replaceWith('<div class="progress user-xp"><div class="progress-bar" role="progressbar"   data-width=" '+t+'" style="width: '+t+'%" aria-valuenow="'+e.progress_in_current_level+'" aria-valuemin="0" aria-valuemax="'+l+'"></div></div>'),jQuery(".welcome-box .user-total-xp").text(r),jQuery(".welcome-box .user-level span").text(user_level_cmg),navigator.cookieEnabled&&null!=sessionStorage.getItem("leveledup")&&t<=20&&1!=user_level_cmg&&(jQuery(".welcome-box .user-level-up").html("Leveled Up!"),jQuery("body").addClass("leveled-up"))}else jQuery(".welcome-box .user-xp").replaceWith('<div class="progress user-xp"><div class="progress-bar" role="progressbar" data-width=" 0" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div></div>'),jQuery(".welcome-box .user-total-xp").text("0/100 XP")}else isCurrentUserAVisitor||jQuery(".user-hud .level").replaceWith('<div class="level level-1"><a class="nav-link text-center"><span class="badge badge-primary">1</span></a></dev>'),jQuery(".welcome-box .level").replaceWith('<div class="level level-1 "><a class="nav-link text-center"><span class="badge badge-primary">1</span></a></dev>'),jQuery(".welcome-box .user-xp").replaceWith('<div class="progress user-xp"><div class="progress-bar" role="progressbar" data-width=" 0" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div></div>'),jQuery(".welcome-box .user-total-xp").text("0/100 XP"),jQuery(".welcome-box .user-level span").text("1")},window.changemyGamelistData=function(e,a){for(var l in a)if(a[l].id==e)return a[l].leaderboardCompleteSt="yes",a;return null},"function"==typeof getCookie&&null!==getCookie("cmg_translation")&&"es"===getCookie("cmg_translation")?l="Cerrar sesión":"function"==typeof getCookie&&null!==getCookie("cmg_translation")&&"pt-br"===getCookie("cmg_translation")&&(l="Sair"),function(a,t,r,s){t.behaviors.cmatgame_leaderboard_post_user_score={attach:function(e,l){if(a("#edit-signmeout-submit").click((function(){localStorage.removeItem("userprofile"),localStorage.removeItem("cmg_lpg")})),navigator.cookieEnabled){var t=sessionStorage.getItem("game_id");user_score_json_data=sessionStorage.getItem(t+"user_score_json_data"),null!=t&&null!=user_score_json_data&&(a.post("/ajax/score",JSON.parse(user_score_json_data)),sessionStorage.removeItem(t+"user_score_json_data"),sessionStorage.removeItem("game_id"))}}},t.behaviors.cmatgame_subscriber_behavior={user_logout:function(e){e.preventDefault(),navigator.cookieEnabled&&(localStorage.removeItem("userprofile"),localStorage.removeItem("cmg_lpg"),"function"==typeof setCookie&&(setCookie("cmg_premium_access","",-1e6),setCookie("cmg_sx","",-1e6),setCookie("cmg_l","",-1e6),setCookie("cmg_uid","",-1e6),setCookie("cmg_xpp","",-1e6),setCookie("cmg_editor","",-1e6),setCookie("ascmg","",-1e6),setCookie("cmg_vs","",-1e6),setCookie("cmg_fx","",-1e6),setCookie("cmg_xps","",-1e6),setCookie("cmg_xpp","",-1e6)));var a="",l=window.location.pathname;return"undefined"===l||""===l||"/"!==l&&!/profile|myaccount/.test(l)?"undefined"!==l&&""!==l&&"/"!==l&&(a="?destination="+l+"&ts="+Date.now()):a="?destination=frontpage&ts="+Date.now(),window.location.href=window.location.protocol+"//"+window.location.host+"/user/logout"+a,!1},user_loginbar_update:function(){var r="";"undefined"!==window.location.pathname&&""!==window.location.pathname&&"/"!==window.location.pathname&&"/user/logout"!==window.location.pathname&&(r="?destination="+window.location.pathname);var i="/login";webhost=/cmatgame.local|coolmathgames.local|local/,i=webhost.test(window.location.host)?window.location.protocol+"//"+window.location.host+"/login"+r:"https://"+window.location.host+"/login"+r;var o='<li class="first"><a href="/profile/account-settings" title="My Account">My Account</a>&nbsp;</li><li>/</li><li class="last">&nbsp;<a href="/user/logout" class="logout" onClick="Drupal.behaviors.cmatgame_subscriber_behavior.user_logout(event); return false;" title="'+l+'">'+l+"</a></li>",n='<li class="first last"><a title="Subscriber Login" class="welcome-text" href="'+i+'">Subscriber Login</a></li>',m=getCookie("cmg_l"),c=getCookie("cmg_editor");"1"===getCookie("cmg_uid")&&a("body").addClass("administrator"),"undefined"!=typeof cmatgame_subscriber&&null!==cmatgame_subscriber&&(a("body").removeClass("logged-in").addClass("not-logged-in"),a("body").removeClass("not-active-user"),a("body").addClass("active-user")),null==c||""===c||isNaN(c)||(o='<li class="first"><a href="/user/'+(c=parseInt(c))+'/edit" title="My Account">'+t.t("My Account")+'</a>&nbsp;</li><li>/</li><li class="last">&nbsp;<a href="/user/logout" class="logout" onClick="Drupal.behaviors.cmatgame_subscriber_behavior.user_logout(event); return false;" title="'+l+'">'+l+"</a></li>",a("body").removeClass("logged-in").addClass("not-logged-in not-active-subscription editor-login"),a("body").removeClass("not-active-user"),a("body").addClass("active-user")),"undefined"!=typeof cmg_school_whitelisted&&"yes"===cmg_school_whitelisted&&(n=o=""),e(m)!==s&&""!==m&&null!==m?(a(".pane-cmatgame-subscription-userloginbar2 .welcome-box").replaceWith('<ul class="welcome-box">'+o+"</ul>"),a("body").removeClass("not-logged-in"),a("body").addClass("logged-in"),a("body").removeClass("not-active-user"),a("body").addClass("active-user")):a(".pane-cmatgame-subscription-userloginbar2 .welcome-box").replaceWith('<ul class="welcome-box">'+n+"</ul>")},attach:function(e,a){t.behaviors.cmatgame_subscriber_behavior.user_loginbar_update()}}}($,Drupal,0,this.document),window.displayUserFollowingDataOnFollowingPage=function(e,a){if(cmg_userprofile_api_settings(),"undefined"!=typeof fvid&&""!==fvid&&(fvid=parseInt(fvid),userprofile.userid,fvid),"en"==drupalSettings.language)var l="/profile";else l="/"+drupalSettings.language+"/profile";for(var t='<form data-drupal-selector="views-form-flag-followers-page-following" class="form-placeholder-include-children" data-msg-required="This field is required." action="'+l+'/following" method="post" id="views-form-flag-followers-page-following" accept-charset="UTF-8" novalidate="novalidate"><div class="table-responsive following"><div class="tabledrag-toggle-weight-wrapper"><button type="button" class="link tabledrag-toggle-weight">Show row weights</button></div><table id="draggableviews-table-flag-followers-page-following" class="cols-0 table table-bordered"><tbody><ul class="ui-sortable draggable" id="sortable">',r=e.split(","),s=1,i=Array(),o=0;o<r.length;o++){var n=r[o],m=new RegExp(n,"gm"),c=0,d="inactive";m.test(a)&&(c=1,d="active"),jQuery.ajaxSetup({async:!1}),jQuery.ajax({url:apiServerURL+"/getdata/"+r[o],type:"GET",data:{},success:function(e){var a={uid:r[o],publicname:e.Items[0].publicname.S,avatarImage:decodeURIComponent(e.Items[0].avatarimage.S),lastplayedgame:e.Items[0].lastplayedgame.S,user_level:e.Items[0].level.S};if($("#sortable li").length%2==0)var n="playlist-item-following-alert-dark";else n="playlist-item-following-alert-light";if(a.user_level>userprofile.user_level){var m='<div class="col-sm-9  alert-info-following "><div class="  alert-txt-info">'+genrate_gamename_link(l+"/"+a.publicname.toLowerCase(),a.publicname)+' outleveled you </div></div><div class="col-sm-3 alert-icon-container"> <span class=" alert-outlevel-icon"></span></div>';jQuery("#sortable").append('<li id="follower-list-item-alertlist" class="row avatar ui-state-default   '+n+' draggable">'+m+"</li>")}var p=searchGamesById(e.Items[0].lastplayedgame.S),u="",g="";if(p.length>0&&(u=p[0].title,g=p[0].alias),s%2==1)var v="playlist-game-item-following-light";else v="playlist-game-item-following-dark";var f="<div></div>";if(i[s]=a.uid,c>=1)var _="with-followup-div",y="with-followup-div-last-played";else _="col-7 col-lg-7",y="";if(a.user_level>=50)var h="starbadge";else h="";if(a.user_level>100)var w=100;else w=a.user_level;t+='<li id="follower-list-item-'+a.publicname+'" class="row avatar ui-state-default playlist-game-item-following '+v+' draggable" ><div class="col handlesign-following">&nbsp;</div><div class="col-4 col-lg-3 profile-img-following"><div class="avatar-image"><a href="'+l+"/"+a.publicname+'"><img class="img-fluid-following" src="'+a.avatarImage+'" alt="'+a.publicname+'" onerror="this.style.display="none";"></a></div><div class="level level-'+a.user_level+" "+h+'"><a class="nav-link text-center"><span class="badge badge-primary">'+w+'</span></a></div></div><div class=" profile-info-following  '+_+'"><a href="'+l+"/"+a.publicname+'" hreflang="en" class="menu-item__link"><h5>'+a.publicname+'</h5></a><div class="last-played">',u&&(t+='<div class="last-played-txt"><h6>'+Drupal.t("Last played")+": </h6></div>"),t+='<div class="last-played-list-game '+y+'"><a href="'+g+'"><h6> '+u+'</h6></a></div></div></div><div style="display: none;"><input class="draggableviews-id form-control col-md-4" data-drupal-selector="edit-draggableviews-0-id" data-msg-required="This field is required." type="hidden" name="draggableviews[0][id]" value='+a.uid+'><input class="draggableviews-parent form-control col-md-4" data-drupal-selector="edit-draggableviews-0-parent" data-msg-required="This field is required." type="hidden" name="draggableviews[0][parent]" value="0"></div>',c>=1&&(t+='<div class="follow-you-container"><div class="follows-you '+d+'">'+Drupal.t("FOLLOWS YOU")+"</div></div>");var b=a.publicname.trim();isCurrentUserAVisitor||(f='<a href="#!" class="deletegame"  data-id="'+b+'"  onclick="deletFollowerWithPubname(this);"><img align="right" class="delimg-following" src="/themes/custom/coolmath/assets/images/delete.png"></a>'),t+=f,t+="</li>",t+='<li id="confirm-blck-follower-list-item-'+a.publicname+'" class="ui-state-default '+v+' draggable" style="display : none;">',t+='<div class="follower-confirm-create-button" id="conform-create-button-id" onclick="get_playlist_premium_handler(this);"><div class="rmv-container">'+Drupal.t("Remove")+" "+a.publicname+'?</div><div class="acct-action-btn-container"><div class="follower-yes-btn-conatiner"><input onClick="ConfirmfollowerRemove(this,'+a.uid+');"  data-id="'+b+'"  data-drupal-selector="edit-profile-cancel" type="button" name="profile_delete_yes_button" value="'+Drupal.t("Yes")+'" class=" button following-confirm-access-btn js-form-submit form-submit btn btn-primary"></div><div class="follower-pa-btn-conatiner"><input onClick="cancelRemoveFollower(this);" data-id="'+b+'" data-drupal-selector="edit--profile-delete-submit" type="button" name="profile_premium_access_submit_button" value="'+window.noTxt+'" class=" following-confirm-access-btn button js-form-submit form-submit btn btn-primary btn-cancel"></div></div>',t+=" </li>",s++},error:function(e){currentElem[0].innerHTML=""}})}1==s&&(t+='<li class="user-profile-following-data"><span class="no-result-following-txt"><h3>'+Drupal.t("Not following anyone yet")+"</h3></span></li>"),t+="</ul></tbody></table></div></form>";var p=i.join();jQuery("#edit-follower-list-showing").val(p),jQuery(".user-profile-following-list").html(t),cmgyaftitle&&jQuery("#cmgyaftitle").length&&jQuery("#cmgyaftitle").parent().html(cmgyaftitle),isCurrentUserAVisitor||saveUserFollowings(e,a)},window.cancelRemoveFollower=function(e){var a="#follower-list-item-"+e.getAttribute("data-id"),l="#confirm-blck-follower-list-item-"+e.getAttribute("data-id");jQuery(l).hide(),jQuery(a).show()},window.deletFollowerWithPubname=function(e){event.preventDefault();var a="#follower-list-item-"+e.getAttribute("data-id"),l="#confirm-blck-follower-list-item-"+e.getAttribute("data-id");jQuery(l).show(),jQuery(a).hide()},window.ConfirmfollowerRemove=function(e,a){var l="#follower-list-item-"+e.getAttribute("data-id"),t="#confirm-blck-follower-list-item-"+e.getAttribute("data-id");jQuery(l).remove(),jQuery(t).remove(),l="#follower-list-item-"+e.getAttribute("data-id"),t="#confirm-blck-follower-list-item-"+e.getAttribute("data-id");var r=localStorage.getItem("userprofile");return r=JSON.parse(r),jQuery(t).show(),jQuery(l).hide(),jQuery.ajax({url:location.protocol+"//"+location.host+"/profile/"+r.publicname+"/following?unflag="+a,data:"message="+a,type:"POST",success:function(l){var t="<div role='contentinfo' aria-label='Status message' ><div class='alert alert-success alert-dismissible' role='alert'>"+Drupal.t("Removed")+" "+e.getAttribute("data-id")+"<button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>×</span></button></div></div>";jQuery(".result_message").html(t);var r=localStorage.getItem("userprofile");r=JSON.parse(r),following_uids=r.myfollowings.split(","),following_uids=following_uids.filter((function(e){return e!=a})),following_uids.length>0?following_uids=following_uids.join():following_uids="",saveUserFollowings(following_uids,r.myfollowers),1==updateFollowerShowingVal(a).length&&(outputHTML='<div class="no-follow-conatiner"><div class="user-profile-following-data"><span class="no-result-following-txt"><h3>'+Drupal.t("Not following anyone yet")+"</h3></span></div></div>",jQuery(".user-profile-following-list").html(outputHTML))}}),!1},window.VisiterUnfollower=function(e){var a=localStorage.getItem("userprofile");return a=JSON.parse(a),jQuery.ajax({url:location.protocol+"//"+location.host+"/profile/"+a.publicname+"/following?unflag="+e,data:"message="+e,type:"POST",success:function(l){following_uids=a.myfollowings.split(","),following_uids=following_uids.filter((function(a){return a!=e})),following_uids.length>0?following_uids=following_uids.join():following_uids="",saveUserFollowings(following_uids,a.myfollowers),jQuery(".settings").replaceWith('<div class="col-lg-2 col-md-6 col-sm-6 col-6 settings"><div class="form-group row"><input onClick="VisiterFollower('+e+');"  data-id="'+a.publicname+'"  data-drupal-selector="edit-profile-cancel" type="button" name="profile_delete_yes_button" value="+ '+Drupal.t("Follow")+'" class=" button following-confirm-access-btn js-form-submit form-submit btn btn-primary"></div>')}}),!1},window.VisiterFollower=function(e){var a=localStorage.getItem("userprofile");return a=JSON.parse(a),jQuery.ajax({url:location.protocol+"//"+location.host+"/profile/"+a.publicname+"/following?flag="+e,data:"message="+e,type:"POST",success:function(l){void 0!==a.myfollowings&&null!=a.myfollowings&&"null"!=a.myfollowings?(following_uids=a.myfollowings,following_uids=following_uids+","+e):following_uids=e.toString(),saveUserFollowings(following_uids,a.myfollowers),jQuery(".settings").replaceWith('<div class="col-lg-2 col-md-6 col-sm-6 col-6 settings"><div class="form-group row"><input onClick="VisiterUnfollower('+e+');"  data-id="'+a.publicname+'"  data-drupal-selector="edit-profile-cancel" type="button" name="profile_delete_yes_button" value="'+Drupal.t("Unfollow")+'" class=" button following-confirm-access-btn js-form-submit form-submit btn btn-primary"></div></div></div>')}}),!1},window.updateFollowerShowingVal=function(e){var a=jQuery("#edit-follower-list-showing").val().split(",");return a=a.filter((function(a){return a!=e})),jQuery("#edit-follower-list-showing").val(a.join()),a};var s=!0;window.saveUserProgress=function(){if((!/profile/.test(location.href)||"undefined"==typeof usrXpSaved||!usrXpSaved)&&(cmg_userprofile_api_settings(),(void 0===drupalSettings.cmatgame||void 0===drupalSettings.cmatgame.swfembed||""==drupalSettings.cmatgame.swfembed||void 0===drupalSettings.cmatgame.flash_emulation||0!=drupalSettings.cmatgame.flash_emulation||void 0===drupalSettings.cmatgame.swfembed||void 0===drupalSettings.cmatgame.swfembed.swf||""==drupalSettings.cmatgame.swfembed.swf)&&isUserValidFreeUserOrSubscriber())){var e=localStorage.getItem("userprofile");if(null==(e=JSON.parse(e))||void 0===e.userid||0==parseInt(e.userid))return;var l=!1,t="undefined"!=typeof srvrUserProfileStr&&"0"!=srvrUserProfileStr?JSON.parse(srvrUserProfileStr):[];if("undefined"==typeof srvrUserProfileStr||"0"==srvrUserProfileStr||0==t.length)l=!0;else{if(srvrUid=void 0!==t.userid?parseInt(t.userid):0,srvrLvl=void 0!==t.user_level?parseInt(t.user_level):1,srvrGames=void 0!==t.mygameslist&&t.mygameslist.length?t.mygameslist:[],srvrPicl=void 0!==t.progress_in_current_level?parseInt(t.progress_in_current_level):0,srvrUpTime=void 0!==t.lastUpdated?parseInt(t.lastUpdated):0,localUid=void 0!==e.userid?parseInt(e.userid):0,localLvl=void 0!==e.user_level?parseInt(e.user_level):1,localGames=void 0!==e.mygameslist&&e.mygameslist.length?e.mygameslist:[],localPicl=void 0!==e.progress_in_current_level?parseInt(e.progress_in_current_level):0,localUpTime=void 0!==e.lastUpdated?parseInt(e.lastUpdated):0,0==srvrUid||0==localUid||srvrUid!=localUid)return;if(localLvl<srvrLvl||srvrLvl==localLvl&&localPicl<srvrPicl)return;if(0==localGames.length&&srvrGames.length>0||srvrGames.length>localGames.length)return;if(srvrUpTime>localUpTime)return;l=!0}if(!l)return;if(s){var r=removeduplicategameids();e.mygameslist=r,srvrUserProfileStr=JSON.stringify(e),localStorage.setItem("userprofile",srvrUserProfileStr)}for(var i="",o=0;o<localStorage.length;o++){var n=localStorage.key(o);if(/userprofile/.test(n)){var m=localStorage.getItem(localStorage.key(o));m=(m=cmg_minify_gamelist(m)).replace(/"/g,"'"),i=i+localStorage.key(o)+"="+m+"cmgsep"}}if("undefined"!=typeof gameId?lastplayedgame=gameId:void 0!==e.lastplayedgame?lastplayedgame=e.lastplayedgame:lastplayedgame=0,void 0!==e&&null!=e&&e.avatarimage){var c=e.avatarimage;e.avatarimage.indexOf("/sites/")>-1&&(c=encodeURIComponent(e.avatarimage))}void 0!==e&&null!=e&&e.userid==a&&(jQuery.ajaxSetup({async:!1}),jQuery.ajax({url:apiServerURL+"/uploaddata",type:"POST",data:JSON.stringify({userid:a,cookies:0,localStorage:i,lastplayedgame,level:e.user_level,publicname:e.publicname,avatarimage:c,flashStorage:0}),success:function(e){usrXpSaved=1},error:function(e,a){debugOut("XP->ls API saveUserProgress: Request failed: "+a)},contentType:"application/json",dataType:"json"}))}},window.removeduplicategameids=function(){var e=localStorage.getItem("userprofile");e=JSON.parse(e),mygameslistData=e.mygameslist;var a=Object.values(mygameslistData.reduce((function(e,a){var l=e[a.id],t=searchGamesById(a.id);return null!=t&&0!=t.length&&(t=t[0].ilb),"1"==t?(!l||parseInt(a.level)>parseInt(l.level)||!l||parseInt(a.level)==parseInt(l.level)&&parseInt(a.timestamp)>parseInt(l.timestamp))&&(e[a.id]=a):(!l||parseInt(a.time)>parseInt(l.time)||!l||parseInt(a.time)==parseInt(l.time)&&parseInt(a.timestamp)>parseInt(l.timestamp))&&(e[a.id]=a),e}),{}));return s=!1,a},window.saveUserFollowings=function(e,a){if(isUserValidFreeUserOrSubscriber()){var l=localStorage.getItem("userprofile");(l=JSON.parse(l)).myfollowings=""==e?null:e,l.myfollowers=""==a?null:a,localStorage.setItem("userprofile",JSON.stringify(l)),saveUserProgress()}},window.saveUserProgressleaderboard=function(e,a,l){void 0!==drupalSettings.cmatgame&&void 0!==drupalSettings.cmatgame.swfembed&&""!=drupalSettings.cmatgame.swfembed&&void 0!==drupalSettings.cmatgame.flash_emulation&&0==drupalSettings.cmatgame.flash_emulation&&void 0!==drupalSettings.cmatgame.swfembed&&void 0!==drupalSettings.cmatgame.swfembed.swf&&""!=drupalSettings.cmatgame.swfembed.swf||void 0!==e&&0!=parseInt(e)&&(cmg_userprofile_api_settings(),jQuery.ajax({url:apiLeaderboardURL+"/uploaddata",type:"POST",data:JSON.stringify({id:e,gameId:a,completedAt:l}),contentType:"application/json",dataType:"json"}))},window.saveUserProfileEvent=function(e,a){cmg_userprofile_api_settings(),jQuery.ajax({url:apiProfileEvent+"/uploaddata",type:"POST",data:JSON.stringify({id:e,timestamp:Date.now(),event:a}),contentType:"application/json",dataType:"json"})},window.checkHowManyLevelsEarned=function(e,a,l){e.user_level;var t=parseInt(e.progress_in_current_level);e.max_xp_in_current_level=l[e.user_level-1],totalXPGained=t+a-parseInt(e.max_xp_in_current_level),e.user_level<100&&(e.user_level=e.user_level+1);for(var r=e.user_level,s=parseInt(l[r-1]);totalXPGained>s;)totalXPGained-=s,s=parseInt(l[e.user_level]),e.max_xp_in_current_level=s,e.user_level<100&&(e.user_level=e.user_level+1);return e.progress_in_current_level=totalXPGained,e},window.generateMyGamesData=function(e){for(var a=[],l=[],t=void 0!==e&&e.length?e.length:0,r=0;r<t;r++)if(null!=e[r]){l.push(e[r].id);var s=searchGamesById(e[r].id);void 0!==s.length&&s.length>0&&(s[0].timestamp=e[r].timestamp,s[0].time=e[r].time,s[0].level=e[r].level,s[0].isFavorite=e[r].isFavorite,void 0!==e[r].nXT&&(s[0].nXT=e[r].nXT),void 0!==e[r].cXT&&(s[0].cXT=e[r].cXT),void 0!==e[r].bookMark?(s[0].bookMark=e[r].bookMark,"undefined"!=typeof gameId&&(bookMark=e[r].bookMark)):s[0].bookMark=0,s[0].timebasedcompletedSt=e[r].timebasedcompletedSt,s[0].incrementgamestatus=e[r].incrementgamestatus,s[0].leaderboardCompleteSt=e[r].leaderboardCompleteSt,void 0===e[r].totalplays?s[0].totalplays=1:s[0].totalplays=e[r].totalplays,"1"==s[0].ilb?"no"==s[0].incrementgamestatus?s[0].xp=parseInt(s[0].level)*s[0].lxp:void 0!==s[0].xp&&1==s[0].timebasedcompletedSt?s[0].xp=parseInt(s[0].level)*s[0].lxp+parseInt(s[0].time)*s[0].mxp:s[0].xp=parseInt(s[0].level)*s[0].lxp:s[0].xp=s[0].time*s[0].mxp,-1==l.indexOf(s[0].id)&&a.push(s[0]))}return a},window.updateMyGamesTimeSpentLevelBaseinuser=function(e,a){saveMyGamesLevelBased(e,1,a)};var n=0,m=0,c=0,d=1,p=0,u="";function g(e){void 0!==e&&((0==m&&0==n||m&&n>c)&&v(e),maxLvl=n,(n=void 0!==e[0].nXPlevel?parseInt(e[0].nXPlevel):1)>=parseInt(e[0].ml)?(p=1,u=""):n>=d?(p=n,m++,v(e),u=d-c):(p=0,u=c&&n<c?c-n:d-n))}function v(e){void 0!==e&&(c=Math.round(parseInt(e[0].ml)/10*m),d=Math.round(parseInt(e[0].ml)/10*(m+1)),void 0!==e[0].level&&parseInt(e[0].level)>=d&&parseInt(e[0].ml)>parseInt(e[0].level)&&(m++,v(e)))}window.saveMyGames=function(e,l,t){if(void 0===e||""==e||0==e)return!0;var r=searchGamesById(e);if("undefined"!=typeof level_based_game_converted_2_time_based&&""!==level_based_game_converted_2_time_based||!r.length)return!0;var s=0,i=!1,o=0,m=0,c="/profile";void 0!==drupalSettings.language&&""!=drupalSettings.language&&"en"!=drupalSettings.language&&(c="/"+drupalSettings.language+"/profile"),null!=localStorage.getItem("ThumbsUp-"+e)&&"like"==localStorage.getItem("ThumbsUp-"+e)&&(m=1),"undefined"==typeof timeSpentOnCurrentGame&&(timeSpentOnCurrentGame=0),("undefined"==typeof game_level||"undefined"!=typeof game_level&&""==game_level)&&(game_level=0);var d=0;if(navigator.cookieEnabled){var v=localStorage.getItem("userprofile"),f=searchGamesById(e);if(null==v)void 0!==a&&null!=a||(a=0),(b=f)[0].nXPlevel=game_level,g(b),p&&(d=game_level),mygameslist=[{id:e,level:d,time:1,totalplays:1,isFavorite:m,timestamp:Date.now(),timebasedcompletedSt:!1,incrementgamestatus:"no",nXT:u,cXT:0}],(v={userid:a,lastplayedgame:e,mygameslist}).lastUpdated=(new Date).getTime(),localStorage.setItem("userprofile",JSON.stringify(v)),o=1,i=p;else{(v=JSON.parse(v)).lastplayedgame=e,mygameslistData=v.mygameslist;var _=!1,y=!1;if(mygameslistData.length>0&&f.length>0)for(var h=0;h<mygameslistData.length;h++)if(parseInt(mygameslistData[h].id)==parseInt(e)){if(l){if(1==mygameslistData[h].timebasedcompletedSt){y=!0;var w=Date.now()}var b;if(mygameslistData[h].level>=f[0].ml&&(y=!0,w=Date.now()),game_level>parseInt(mygameslistData[h].level))y=!1,(b=f)[0].nXPlevel=game_level,g(b),void 0!==mygameslistData[h].level&&(d=mygameslistData[h].level),p&&(d=game_level),mygameslistData[h].nXT=u,mygameslistData[h].cXT=n,d<f[0].ml?(o=d-parseInt(mygameslistData[h].level),mygameslistData[h].level=d,i=p,mygameslistData[h].time=0,y=!1):d>=f[0].ml&&(i=!0,y=!0,o=1,mygameslistData[h].level=d,w=Date.now());else game_level>=f[0].ml?(o=game_level-parseInt(mygameslistData[h].level),mygameslistData[h].time=mygameslistData[h].time?parseInt(mygameslistData[h].time)+1:1,i=!0,y=!0,w=Date.now()):i=!1}else{mygameslistData[h].time=mygameslistData[h].time?parseInt(mygameslistData[h].time)+1:1,o=1,i=!0;var y=!1}var S=localStorage.getItem("runoncestarted"),x=(JSON.parse(S)[e],"storagelocal-"+e+"-storagelocal"),I=localStorage.getItem(x);1==y&&"no"==I&&(level_based_game_converted_2_time_based=setInterval((function(){0===(new Date).getSeconds()&&updateMyGamesTimeSpentLevelBaseinuser(e,t)}),1e3)),mygameslistData[h].isFavorite=m,mygameslistData[h].timestamp=Date.now(),mygameslistData[h].timebasedcompletedSt=y,mygameslistData[h].timecompleted=w,mygameslistData[h].incrementgamestatus="no",incrementedTotalPlays||(mygameslistData[h].totalplays=mygameslistData[h].totalplays?mygameslistData[h].totalplays+1:1,incrementedTotalPlays=!0),_=!0}_||((b=f)[0].nXPlevel=game_level,g(b),p&&(d=game_level),mygameslistData.push({id:e,level:d,time:1,totalplays:1,isFavorite:m,timestamp:Date.now(),timebasedcompletedSt:y,timecompleted:w,incrementgamestatus:"no",nXT:u,cXT:1}),o=l?parseInt(game_level):1,i=!0,store_first_time_played_game_event(e)),v.mygameslist=mygameslistData,v.lastUpdated=(new Date).getTime()}if(i){if(myGamesData=generateMyGamesData(v.mygameslist),f.length>0&&(s="1"==f[0].ilb?o*parseInt(f[0].lxp):o*parseInt(f[0].mxp)),void 0===v.progress_in_current_level)v.progress_in_current_level=s,v.user_level=1,v.max_xp_in_current_level=userprofile_level_xpData[0];else{var k=parseInt(v.progress_in_current_level);k+s>=parseInt(v.max_xp_in_current_level)?(totalXPGained=k+s-parseInt(v.max_xp_in_current_level),totalXPGained>=parseInt(userprofile_level_xpData[v.user_level])?v=checkHowManyLevelsEarned(v,s,userprofile_level_xpData):(v.progress_in_current_level=totalXPGained,v.user_level=parseInt(v.user_level)+1,v.max_xp_in_current_level=parseInt(userprofile_level_xpData[v.user_level-1]),store_profile_level_event(v.user_level),store_game_xp_leveled_up_event(v.user_level)),1!=v.user_level&&navigator.cookieEnabled&&sessionStorage.setItem("leveledup",v.user_level)):v.progress_in_current_level=parseInt(v.progress_in_current_level)+s}if(localStorage.setItem("userprofile",JSON.stringify(v)),isUserValidFreeUserOrSubscriber()){display_user_profile_progressbar();var D=searchGamesById(e);if("en"==drupalSettings.language&&void 0!==D&&D.length)var C=D[0].alias;else void 0!==D&&D.length&&(C="/"+drupalSettings.language+D[0].alias);if(1==y&&(saveUserProgressleaderboard(a,e,w),D.length>0)){var U=escapeHtml('<div class="col-sm-9  alert-info-following "><div class="  alert-txt-info">'+genrate_gamename_link(c+"/"+v.publicname,v.publicname)+" completed "+genrate_gamename_link(C,D[0].title)+"</div></div>"+genrate_image_link(C,D[0].img));saveUserProfileEvent(a,U)}saveUserProgress()}}}"function"==typeof cmg_game_xp_dsp&&(v.lastUpdated=(new Date).getTime(),localStorage.setItem("userprofile",JSON.stringify(v)),cmg_game_xp_dsp())};var _="",y="";sXpLvl=-1,sXpUid=0,lXpUid=0,window.cmg_minify_gamelist=function(e){try{if(""!=e){var a=e.replace(/\"incrementgamestatus\"/g,'"ig"').replace(/\"isFavorite\"/g,'"fa"').replace(/\"bookMark\"/g,'"bm"').replace(/\"level\"/g,'"lv"').replace(/\"time\"/g,'"ti"').replace(/\"timebasedcompletedSt\"/g,'"tb"').replace(/\"timecompleted\"/g,'"tc"').replace(/\"timestamp\"/g,'"ts"').replace(/\"totalplays\"/g,'"tp"').replace(/\"leaderboardCompleteSt\"/g,'"lb"');e=a}else e=""}catch(e){}return e},window.cmg_deminify_gamelist=function(e){try{if(""!=e){var a=e.replace(/\"ig\"/g,'"incrementgamestatus"').replace(/\"fa\"/g,'"isFavorite"').replace(/\"lv\"/g,'"level"').replace(/\"ti\"/g,'"time"').replace(/\"bm\"/g,'"bookMark"').replace(/\"tb\"/g,'"timebasedcompletedSt"').replace(/\"tc\"/g,'"timecompleted"').replace(/\"ts\"/g,'"timestamp"').replace(/\"tp\"/g,'"totalplays"').replace(/\"lb\"/g,'"leaderboardCompleteSt"');e=a=a.replace(/\'ig\'/g,'"incrementgamestatus"').replace(/\'fa\'/g,'"isFavorite"').replace(/\'lv\'/g,'"level"').replace(/\'ti\'/g,'"time"').replace(/\'bm\'/g,'"bookMark"').replace(/\'tb\'/g,'"timebasedcompletedSt"').replace(/\'tc\'/g,'"timecompleted"').replace(/\'ts\'/g,'"timestamp"').replace(/\'tp\'/g,'"totalplays"').replace(/\'lb\'/g,'"leaderboardCompleteSt"')}else e=""}catch(e){}return e},window.cmg_merge_profile_obj=function(a,l){var t=!1,r=void 0!==a.mygameslist&&""!=a.mygameslist&&"0"!=a.mygameslist?a.mygameslist:[],s=void 0!==l.mygameslist&&""!=l.mygameslist&&"0"!=l.mygameslist?l.mygameslist:[],i=[];if(r.length&&s.length){for(var o=0;o<r.length;o++){var n=r[o],m=searchGamesById(n.id);m.length&&"object"==e(m)&&(m=m[0]);for(var c=!1,d=0;d<s.length;d++){var p=s[d];if(n.id==p.id)if(c=!0,"1"==m.ilb){var u=parseInt(r[o].level);u>parseInt(s[d].level)&&parseInt(n.timestamp)>parseInt(p.timestamp)&&(t=!0,l.mygameslist[d].level=u,l.mygameslist[d].totalplays&&(l.mygameslist[d].totalplays=parseInt(l.mygameslist[d].totalplays)+1),m.ml&&u>=parseInt(m.ml)&&1!=l.mygameslist[d].timebasedcompletedSt&&(l.mygameslist[d].timebasedcompletedSt=!0,checkLevelBasedGameCompletion(n.id)))}else lTime=parseInt(r[o].time),lTime>0&&(t=!0),aTime=parseInt(s[d].time),l.mygameslist[d].time=lTime+aTime,lTime+aTime>=parseInt(m.mta)&&parseInt(n.timestamp)>parseInt(p.timestamp)&&"yes"!=l.mygameslist[d].leaderboardCompleteSt&&(l.mygameslist[d].leaderboardCompleteSt="yes",checkTimeBasedGameCompletion(n.id))}c||i.push(n)}if(i.length)for(var g=0;g<i.length;g++)l.mygameslist.push(i[g]);void 0!==a.lastUpdated&&void 0!==l.lastUpdated&&parseInt(a.lastUpdated)>parseInt(l.lastUpdated)&&(l.lastUpdated=a.lastUpdated,void 0!==a.lastplayedgame&&""!=a.lastplayedgame&&(l.lastplayedgame=a.lastplayedgame));var v=void 0!==l.progress_in_current_level&&""!=l.progress_in_current_level?parseInt(l.progress_in_current_level):0,f=void 0!==a.progress_in_current_level&&""!=a.progress_in_current_level?parseInt(a.progress_in_current_level):0,_=void 0!==l.max_xp_in_current_level&&""!=l.max_xp_in_current_level?parseInt(l.max_xp_in_current_level):100,y=void 0!==l.user_level&&""!=l.user_level?parseInt(l.user_level):1,h=void 0!==a.user_level&&""!=a.user_level?parseInt(a.user_level):1;if(y!=h){var w=getTotalXPGained(a,userprofile_level_xpData);(w>0||0==w&&(y>h||v>f))&&(t=!0),l=updateLevelsEarned(l,w,userprofile_level_xpData)}else if(y==h){v>0&&f>0&&(t=!0);var b=parseInt(userprofile_level_xpData[y]);v+f>=_?(l.user_level=userprofile_level_xpData.length>l.user_level+1?l.user_level+1:userprofile_level_xpData.length,l.max_xp_in_current_level=b,l.progress_in_current_level=v+f-_):l.progress_in_current_level=v+f}}else r.length&&(l.mygameslist=r,t=!0,void 0!==a.lastUpdated&&void 0!==l.lastUpdated&&parseInt(a.lastUpdated)>parseInt(l.lastUpdated)&&(l.lastUpdated=a.lastUpdated,void 0!==a.lastplayedgame&&""!=a.lastplayedgame&&(l.lastplayedgame=a.lastplayedgame)),void 0!==a.progress_in_current_level&&""!=a.progress_in_current_level&&(l.progress_in_current_level=a.progress_in_current_level),void 0!==a.max_xp_in_current_level&&""!=a.max_xp_in_current_level&&(l.max_xp_in_current_level=a.max_xp_in_current_level),void 0!==a.user_level&&""!=a.user_level&&(l.user_level=a.user_level),void 0!==a.lastUpdated&&""!=a.lastUpdated&&(l.lastUpdated=a.lastUpdated));return t&&localStorage.setItem("userprofile",JSON.stringify(l)),l},window.updateLevelsEarned=function(e,a,l){var t=e.user_level,r=parseInt(e.progress_in_current_level);totalXPGained=r+a;for(var s=parseInt(e.user_level),i=parseInt(l[s-1]);totalXPGained>=i;)totalXPGained-=i,i=parseInt(l[e.user_level]),e.max_xp_in_current_level=i,e.user_level<100&&(e.user_level=t+1);return e.progress_in_current_level=totalXPGained,e},window.getTotalXPGained=function(e,a){var l=void 0!==e.user_level&&""!=e.user_level?parseInt(e.user_level):1,t=void 0!==e.progress_in_current_level&&""!=e.progress_in_current_level?parseInt(e.progress_in_current_level):0,r=parseInt(a[l-1]);for(totalXPGained=t;l>1;)l-=1,r=parseInt(a[l-1]),totalXPGained+=r;return totalXPGained},window.checkTimeBasedGameCompletion=function(l){var t=localStorage.getItem("userprofile");if(null!=t&&l){t=JSON.parse(t);var r="cmg_comp_"+l,s=null!==localStorage.getItem(r)?parseInt(localStorage.getItem(r)):0;if("object"==e(t)&&t.mygameslist.length&&!s){var i=generateMyGamesData(t.mygameslist).filter((function(e){return e.id==l}));if(0==i.length&&(i=cmatgameSearchGames.filter((function(e){return e.id==l}))),i.length>0&&void 0!==i[0].time&&parseInt(i[0].time)>=parseInt(i[0].mta)&&("no"==i[0].leaderboardCompleteSt||void 0===i[0].leaderboardCompleteSt)){var o=t.mygameslist,n=changemyGamelistData(l,o);t.mygameslist=n,localStorage.setItem("userprofile",JSON.stringify(t));var m=escapeHtml('<div class="col-sm-9  alert-info-following "><div class="  alert-txt-info">'+genrate_gamename_link("/profile/"+t.publicname,t.publicname)+" completed "+genrate_gamename_link(i[0].alias,i[0].title)+"</div></div>"+genrate_image_link(i[0].alias,i[0].img));saveUserProfileEvent(a,m),saveUserProgressleaderboard(parseInt(t.userid),l,Date.now()),localStorage.setItem(r,i[0].id)}}}},window.checkLevelBasedGameCompletion=function(l){var t=localStorage.getItem("userprofile");if(null!=t&&l){t=JSON.parse(t);var r="cmg_comp_"+l,s=null!==localStorage.getItem(r)?parseInt(localStorage.getItem(r)):0;if("object"==e(t)&&t.mygameslist.length&&!s){var i=generateMyGamesData(t.mygameslist).filter((function(e){return e.id==l}));if(0==i.length&&(i=cmatgameSearchGames.filter((function(e){return e.id==l}))),i.length>0&&void 0!==i[0].level&&parseInt(i[0].level)>=parseInt(i[0].ml)&&("no"==i[0].leaderboardCompleteSt||void 0===i[0].leaderboardCompleteSt)){var o=t.mygameslist,n=changemyGamelistData(l,o);t.mygameslist=n,localStorage.setItem("userprofile",JSON.stringify(t));var m=escapeHtml('<div class="col-sm-9  alert-info-following "><div class="  alert-txt-info">'+genrate_gamename_link("/profile/"+t.publicname,t.publicname)+" completed "+genrate_gamename_link(i[0].alias,i[0].title)+"</div></div>"+genrate_image_link(i[0].alias,i[0].img));saveUserProfileEvent(a,m),saveUserProgressleaderboard(parseInt(t.userid),l,Date.now()),localStorage.setItem(r,i[0].id)}}}},window.cmg_compress_data=function(e){if(""!=e){var a=JSON.parse(e),l=a.mygameslist;delete a.mygameslist;var t=JSON.stringify(a);t=t.replace(/"/g,"cmgdq").replace(/{/g,"cmgocb").replace(/}/g,"cmgccb").replace(/,/g,"cmgcomma").replace(/\[/g,"cmgsqbr").replace(/\\/g,"cmgbb").replace(/</g,"cmglt").replace(/>/g,"cmggt").replace(/=/g,"cmgeq");var r,s="charCodeAt",i={},o=(e=JSON.stringify(l)).split(""),n=[],m=o[0],c=256;for(r=1;r<o.length;r++)null!=i[m+(e=o[r])]?m+=e:(n.push(1<m.length?i[m]:m[s](0)),i[m+e]=c,c++,m=e);for(n.push(1<m.length?i[m]:m[s](0)),r=0;r<n.length;r++)n[r]=String.fromCharCode(n[r]);var d=n.join("");return"cmgzip"+t+"mygameslist:"+(d=d.replace(/"/g,"cmgdq").replace(/{/g,"cmgocb").replace(/}/g,"cmgccb").replace(/,/g,"cmgcomma").replace(/\[/g,"cmgsqbr").replace(/\\/g,"cmgbb").replace(/</g,"cmglt").replace(/>/g,"cmggt").replace(/=/g,"cmgeq"))}return""},window.cmg_decompress_data=function(e){if(""==e)return"";var a=e.indexOf("mygameslist:"),l=e.slice(a+12),t=e.slice(0,a);t=t.replace(/cmgzip/,"").replace(/cmgbb/g,"\\").replace(/cmgsqbr/g,"[").replace(/cmgcomma/g,",").replace(/cmgccb/g,"}").replace(/cmgocb/g,"{").replace(/cmgdq/g,'"').replace(/cmgeq/g,"=").replace(/userprofile=/,"");var r,s={},i=(e=l.replace(/cmgzip/,"").replace(/cmgbb/g,"\\").replace(/cmgsqbr/g,"[").replace(/cmgcomma/g,",").replace(/cmgccb/g,"}").replace(/cmgocb/g,"{").replace(/cmgdq/g,'"').replace(/cmgeq/g,"=")).split(""),n=f=i[0],m=[n],c=o=256;for(e=1;e<i.length;e++)r=c>(r=i[e].charCodeAt(0))?i[e]:s[r]?s[r]:f+n,m.push(r),n=r.charAt(0),s[o]=f+n,o++,f=r;l=m.join("").replace(/cmgsep/,"");try{var d=JSON.parse(l),p=JSON.parse(t);return p.mygameslist=d,"userprofile="+JSON.stringify(p)+"cmgsep"}catch(e){return null==getCookie("cmg_uid")?trackEvent("UserprofileXPError","ErrorParsingJson","No user id"):trackEvent("UserprofileXPError","ErrorParsingJson",getCookie("cmg_uid")),""}},window.retrieveUserProgress=function(){if(cmg_userprofile_api_settings(),isUserValidFreeUserOrSubscriber())jQuery.ajaxSetup({async:!1}),jQuery.ajax({url:apiServerURL+"/getdata/"+a,type:"GET",data:{},success:function(e){if(void 0!==e.Count&&"The level of configured provisioned throughput for the table was exceeded. Consider increasing your provisioning level with the UpdateTable API."!=e.message)if(0==e.Count){sXpLvl=1,sXpUid=0,"undefined"!=typeof user_id&&(sXpUid=parseInt(user_id));var l=localStorage.getItem("userprofile")}else{_=e.Items[0].cookies.S,y=e.Items[0].localStorage;var t=e.Items[0].publicname.S;void 0!==e.Items[0].level&&(sXpLvl=parseInt(e.Items[0].level.S)),void 0!==e.Items[0].id&&(sXpUid=parseInt(e.Items[0].id.S));var r=decodeURIComponent(e.Items[0].avatarimage.S),s=e.Items[0].flashStorage.S;if("0"!=(s=(s=s.replace(/cmgsqbr/g,"[").replace(/cmgcomma/g,",").replace(/cmgccb/g,"}").replace(/cmgocb/g,"{").replace(/cmgdq/g,'"')).replace(/\\"/g,'"').replace(/""/g,'"'))){flashStorageFromDB=JSON.parse(s);for(var i=0;i<flashStorageFromDB.length;i++)flashStorageFromDB[i].swfdata=decodeURI(flashStorageFromDB[i].swfdata)}var o=y.S;0==y.S.indexOf("userprofile=cmgocbcmgdquseridcmgdq")&&y.S.indexOf("cmgzip")<0?o=(o=(o=cmg_deminify_gamelist(o)).replace(/cmgbb/g,"\\").replace(/cmgsqbr/g,"[").replace(/cmgcomma/g,",").replace(/cmgccb/g,"}").replace(/cmgocb/g,"{").replace(/cmgdq/g,'"').replace(/cmgeq/g,"=")).replace(/\\"/g,'"').replace(/""/g,'"'):y.S.indexOf("cmgzip")>=0?(y.S=cmg_decompress_data(e.Items[0].localStorage.S),o=y.S):o=(o=cmg_deminify_gamelist(o)).replace(/'/g,'"');var n=""!==o?o.split("cmgsep"):[];for(srvrUserProfileStr="0",i=0;i<n.length;i++)if(tmpData=n[i].split("="),"userprofile"==tmpData[0]){var m=localStorage.getItem("userprofile");if(srvrUserProfileStr=tmpData[1],null!=m){var c=JSON.parse(m),d=tmpData[1],p=JSON.parse(d),u=1;void 0!==c.user_level&&(u=c.user_level),lXpUid=0,void 0!==c.userid&&null!=c.userid&&(lXpUid=parseInt(c.userid)),apiUid=0,void 0!==p.userid&&(apiUid=parseInt(p.userid));var g=!1;if(0==lXpUid&&0!=apiUid){var v=JSON.parse(JSON.stringify(p)),f=cmg_merge_profile_obj(c,p);if(void 0!==f&&0==parseInt(lXpUid)&&0!=parseInt(sXpUid)){var h=void 0!==v.user_level&&""!=v.user_level?parseInt(v.user_level):1,w=void 0!==f.user_level&&""!=f.user_level?parseInt(f.user_level):1,b=void 0!==v.progress_in_current_level&&""!=v.progress_in_current_level?parseInt(v.progress_in_current_level):0,S=void 0!==f.progress_in_current_level&&""!=f.progress_in_current_level?parseInt(f.progress_in_current_level):0,x=void 0!==v.mygameslist&&""!=v.mygameslist?v.mygameslist.length:0,I=void 0!==f.mygameslist&&""!=f.mygameslist?f.mygameslist.length:0;(w>h||w==h&&S>b||w==h&&S==b&&I>x)&&(g=!0)}}void 0!==c.lastUpdated&&(void 0!==p.lastUpdated?c.lastUpdated<p.lastUpdated?void 0!==tmpData[0]&&void 0!==tmpData[1]&&localStorage.setItem(tmpData[0],tmpData[1]):(g||u>=sXpLvl&&lXpUid==sXpUid&&c.lastUpdated>p.lastUpdated)&&saveUserProgress():g||u>=sXpLvl&&lXpUid==sXpUid?saveUserProgress():trackEvent("XP deLevelingCheck","Incorrect updation2 stopped. Local level ="+lXpUid+" and API Level "+sXpLvl+". Uid="+sXpUid,document.title))}else void 0!==tmpData[0]&&void 0!==tmpData[1]&&localStorage.setItem(tmpData[0],tmpData[1])}else void 0!==tmpData[0]&&void 0!==tmpData[1]&&localStorage.setItem(tmpData[0],tmpData[1]);var k=_.replace(/cmgbb/g,"\\").replace(/cmgsqbr/g,"[").replace(/cmgcomma/g,",").replace(/cmgccb/g,"}").replace(/cmgocb/g,"{").replace(/cmgdq/g,'"');for(k=k.replace(/\\"/g,'"').replace(/""/g,'"'),tmpCookies=k.split("cmgsep"),i=0;i<tmpCookies.length;i++){var D=tmpCookies[i].split("=");if(/^( _ga| _gid| cmg_| mbox| __stripe|__stripe_mid| __gads| SESS| ascmg)/.test(D[0]));else{var C=new Date;C.setTime(C.getTime()+864e5);var U="expires="+C.toUTCString();document.cookie=D[0]+"="+D[1]+"; "+U+"; path=/;"}}if(null!=(l=localStorage.getItem("userprofile"))&&""!=l&&"0"!=l){try{l=JSON.parse(l),null!=getCookie("cmg_fx")?l.publicname=getCookie("cmg_fx"):l.publicname=t,void 0!==a&&null!=a&&a!=l.userid&&(0==l.userid||0==parseInt(l.userid)?(l.userid=a,-1!=r.indexOf("/sites/")&&(l.avatarimage=encodeURIComponent(r)),localStorage.setItem("userprofile",JSON.stringify(l)),saveUserProgress()):l.userid=a),-1!=r.indexOf("/sites/")&&(l.avatarimage=encodeURIComponent(r)),localStorage.setItem("userprofile",JSON.stringify(l))}catch(e){}if(myGamesData=generateMyGamesData(l.mygameslist),"undefined"!=typeof gameId&&gameId&&displayGameFavoriteStatus(myGamesData),l.user_level>100?user_level_cmg=100:user_level_cmg=l.user_level,jQuery(".user-hud .badge-primary").replaceWith('<span class="badge badge-primary">'+user_level_cmg+"</span>"),jQuery(".welcome-box .badge-primary").replaceWith('<span class="badge badge-primary">'+user_level_cmg+"</span>"),void 0!==l.progress_in_current_level){var P=l.max_xp_in_current_level,j=Math.floor(l.progress_in_current_level/P*100);l.user_level<100?(l.progress_in_current_level,Drupal.t("XP")):Drupal.t("MAX LEVEL"),jQuery(".welcome-box .user-xp").replaceWith('<div class="progress user-xp"><div class="progress-bar" role="progressbar"   data-width=" '+j+'" style="width: '+j+'%" aria-valuenow="'+l.progress_in_current_level+'" aria-valuemin="0" aria-valuemax="'+P+'"></div></div>')}else jQuery(".user-xp").hide()}else{null!=getCookie("cmg_fx")&&(t=getCookie("cmg_fx"));var L=null!=getCookie("cmg_uid")?getCookie("cmg_uid"):"anon";trackEvent("CMGUserProfileError","Userprofile object not found or not received from API",L)}}else debugOut(new Date+"CMGXP :API limit ")},error:function(e){}});else{if("en"==drupalSettings.language)var e="/login";else e="/"+drupalSettings.language+"/login";jQuery(document).ready((function(){jQuery(".game-xp-progress").replaceWith('<div class="progress game-xp-progress"><div class="progress-text"><a href="'+e+'">'+Drupal.t("Login to Earn XP")+'</a></div><div class="progress-bar" role="progressbar"  data-width=" 70 %"  style="width:70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"></div></div>')}))}},window.displayGameFavoriteStatus=function(e){for(i=0;i<e.length;i++){var a=parseInt(e[i].id);"undefined"!=typeof gameId&&a==gameId&&(favoriteLiked=status,favoriteLiked=void 0!==e[i].bookMark?e[i].bookMark:0,favoriteLiked?(jQuery("body").addClass("favorited"),localStorage.setItem("svgControlFAClicked-"+gameId,!0)):jQuery("body").removeClass("favorited"))}},jQuery(document).ready((function(){retrieveUserProgress()})),window.switchUserStyle=function(e){var a=location.protocol+"//"+location.host+"/"+e.path;jQuery("#styleswitcher-css").attr("href",a),jQuery(".style-switcher").removeClass("active").filter('[data-rel="'+e.name+'"]').addClass("active"),jQuery(".style-switcher").filter('[data-rel="'+e.name+'"]').parent("li").insertBefore("#themes li:first")},window.displayUserProfileHeaderData=function(){if("en"==drupalSettings.language)var a="/profile";else a="/"+drupalSettings.language+"/profile";if(isCurrentUserAVisitor)if(isUserValidFreeUserOrSubscriber()){jQuery(document.body).addClass("logged-in");var l=localStorage.getItem("userprofile");null!=userprofile?(l=JSON.parse(l),ownerUserID=l.userid,void 0!==l.myfollowings&&null!=l.myfollowings&&l.myfollowings.indexOf(user_id)>-1?jQuery(".settings").replaceWith('<div class="col-lg-2 col-md-6 col-sm-6 col-6 settings"><div class="form-group row"><input onClick="VisiterUnfollower('+user_id+');"  data-id="'+l.publicname+'"  data-drupal-selector="edit-profile-cancel" type="button" name="profile_delete_yes_button" value="'+Drupal.t("Unfollow")+'" class=" button following-confirm-access-btn js-form-submit form-submit btn btn-primary"></div></div></div>'):"undefined"!=typeof allow_follow_me&&"1"===allow_follow_me&&jQuery(".settings").replaceWith('<div class="col-lg-2 col-md-6 col-sm-6 col-6 settings"><div class="form-group row"><input onClick="VisiterFollower('+user_id+');"  data-id="'+l.publicname+'"  data-drupal-selector="edit-profile-cancel" type="button" name="profile_delete_yes_button" value="+ '+Drupal.t("Follow")+'" class=" button following-confirm-access-btn js-form-submit form-submit btn btn-primary"></div>')):jQuery(".settings").replaceWith("")}else jQuery(".settings").replaceWith("");var t=void 0!==userprofile.user_level?userprofile.user_level:1;if(t>=1&&t<=4&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_01+"</div>"),t>=5&&t<=9&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_02+"</div>"),t>=10&&t<=14&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_03+"</div>"),t>=15&&t<=19&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_04+"</div>"),t>=20&&t<=24&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_05+"</div>"),t>=25&&t<=29&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_06+"</div>"),t>=30&&t<=34&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_07+"</div>"),t>=35&&t<=39&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_08+"</div>"),t>=40&&t<=44&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_09+"</div>"),t>=45&&t<=49&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_10+"</div>"),t>=50&&jQuery(".user-hud .user-title").replaceWith('<div class="user-title">'+window.p_Levels.level_10+"</div>"),null!=userprofile&&""!=userprofile){null!=userprofile&&"object"!=("undefined"==typeof userprofile?"undefined":e(userprofile))&&(userprofile=JSON.parse(userprofile)),lastplayedgameId=userprofile.lastplayedgame,myGamesData=generateMyGamesData(userprofile.mygameslist);var r="";if(location.pathname!==a+"/subscribe"&&location.pathname!==a+"/premium-access"||"undefined"==typeof premium_nickname||null==premium_nickname||""===premium_nickname?"undefined"!=typeof user_nickname&&""!==user_nickname?(r=user_nickname,profile_path=user_nickname.toLocaleLowerCase()):void 0!==userprofile.publicname&&(r=userprofile.publicname,profile_path=userprofile.publicname.toLocaleLowerCase()):(r=premium_nickname,profile_path=r.toLocaleLowerCase()),void 0!==userprofile.user_level&&userprofile.user_level>100?user_level_cmg=100:void 0!==userprofile.user_level?user_level_cmg=userprofile.user_level:user_level_cmg=1,jQuery(".user-hud .user-name").replaceWith('<div class="user-name text-left"><a href="'+a+"/"+profile_path+'">'+r+"</a></div>"),jQuery(".user-hud .badge-primary").replaceWith('<span class="badge badge-primary">'+user_level_cmg+"</span>"),void 0!==userprofile.progress_in_current_level){var s=userprofile.max_xp_in_current_level;if(userprofile.user_level<100)var i=userprofile.progress_in_current_level+"/"+s+" "+Drupal.t("XP");else i=Drupal.t("MAX LEVEL");var o=Math.floor(userprofile.progress_in_current_level/s*100);jQuery(".user-hud .user-xp").replaceWith('<div class="progress user-xp"><div class="progress-text">'+i+'</div><div class="progress-bar" role="progressbar"   data-width=" '+o+'" style="width: '+o+'%" aria-valuenow="'+userprofile.progress_in_current_level+'" aria-valuemin="0" aria-valuemax="'+s+'"></div></div>'),navigator.cookieEnabled&&null!=sessionStorage.getItem("leveledup")&&o<=20&&!isCurrentUserAVisitor&&1!=userprofile.user_level&&(jQuery(".user-hud .user-level-up").html("Leveled Up!"),jQuery("body").addClass("leveled-up"))}else jQuery(".user-hud .user-xp").replaceWith('<div class="progress user-xp"><div class="progress-text">0/'+userprofile_level_xpData[0]+' XP</div><div class="progress-bar" role="progressbar"  data-width="0%"  style="width:0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="'+userprofile_level_xpData[0]+'"></div></div>');if(0!=lastplayedgameId&&null!=lastplayedgameId&&""!=lastplayedgameId){var n=searchGamesById(lastplayedgameId);n.length>0&&(jQuery(".last-played").replaceWith("<div class='game-item card flex-row mb-3 last-played'><a href='"+n[0].alias+"'><img class='card-img-left flex-auto d-lg-block' style='width: 82px; height: 50px;' src='/sites/default/files/styles/thumbnail_small/public"+n[0].img+"'></a><div class='card-body d-flex d-flex flex-column align-items-start'><p class='card-text mb-1'>"+Drupal.t("Last played")+"</p><h3 class='mb-0 last-played'><a href='"+n[0].alias+"'>"+n[0].title+"</a></h3></div></div>"),jQuery(".last-played-img").replaceWith("<a href='"+n[0].alias+"'><img class='card-img-left flex-auto d-lg-block' alt='"+n[0].title+" Game'  style='width: 82px; height: 50px;'' src='"+n[0].img+"'></a>"))}else jQuery(".last-played").replaceWith("<div class='game-item card flex-row mb-3 last-played'><a href='/'><img class='card-img-left flex-auto d-lg-block' style='width: 82px; height: 50px;' src='/themes/custom/coolmath/assets/themes/images/coolmath-logo-default.png'></a><div class='card-body d-flex d-flex flex-column align-items-start'><p class='card-text mb-1'>"+Drupal.t("Last played")+"</p><h3 class='mb-0 last-played'>"+Drupal.t("Play games to see them here!")+"</h3></div></div>");if(jQuery.isEmptyObject(userprofile.mygameslist)||jQuery(".total-games-played").replaceWith("<h3 class='card-header total-games-played col-lg-12 col-md-6 col-sm-12'>"+userprofile.mygameslist.length+"</h3>"),jQuery(".total-levels-completed").replaceWith('<h3 class="card-header total-levels-completed col-lg-12 col-md-6 col-sm-12">'+totalLevelsComplated(myGamesData)+"</h3>"),!isCurrentUserAVisitor){var m='<div class="form-group row"><div class="p-0 pr-md-2 p-lg-0 col-lg-12 col-md-6 col-sm-12 col-12"><a href="'+a+"/"+profile_path+'/edit" class="btn btn-primary btn-md mb-2">'+Drupal.t("Customize My Page")+'</a></div><div class="p-0 pl-md-2 p-lg-0 col-lg-12 col-md-6 col-sm-12 col-12"><a href="'+a+'/account-settings" class="btn btn-primary btn-md mb-2">'+Drupal.t("Account Settings")+"</a></div>";null==getCookie("cmg_sx")&&(m=m+'<a onclick="premium_access_event_handler();" href="'+a+'/premium-access/5b8689c9" class="btn btn-sm signup-link">'+Drupal.t("Get Premium Access")+"</a>"),jQuery(".settings").replaceWith('<div class="col-lg-2 col-md-6 col-sm-6 col-6 settings">'+m+"</div></div>")}"function"==typeof getCookie&&null!==getCookie("cmg_fx")&&null===getCookie("cmg_sx")&&jQuery(".pane-bean-new-go-ad-free").html('<a class="premium-profile-masthead prem-profile-btn"  href="'+a+'/premium-access/5b8689c9"><span class="prem-prof-star"><img src="/themes/custom/coolmath/assets/images/star-solid.svg"></span><span class="prem-prof-text">'+window.profileBtnTxt+"</span></a>"),myGamesData.length>0?(myGamesDataTotalPlays=sortMyGamesDataByTotalPlays(myGamesData),myGamesDataTotalPlays.length>0&&jQuery(".most-played").replaceWith('<div class="game-item card flex-row mb-3 most-played"><a href="'+myGamesDataTotalPlays[0].alias+'"><img class="card-img-left flex-auto d-lg-block" style="width: 82px; height: 50px;" src="/sites/default/files/styles/thumbnail_small/public'+myGamesDataTotalPlays[0].img+'"></a><div class="card-body d-flex flex-column align-items-start"><p class="card-text mb-1">'+Drupal.t("Most played")+'</p><h3 class="mb-0"><a href="'+myGamesDataTotalPlays[0].alias+'">'+myGamesDataTotalPlays[0].title+"</a></h3></div></div>")):jQuery(".most-played").replaceWith('<div class="game-item card flex-row mb-3 most-played"><a href="/""><img class="card-img-left flex-auto d-lg-block" style="width: 82px; height: 50px;" src="/themes/custom/coolmath/assets/themes/images/coolmath-logo-default.png"></a><div class="card-body d-flex flex-column align-items-start"><p class="card-text mb-1">'+Drupal.t("Most played")+'</p><h3 class="mb-0">'+Drupal.t("Play games to see them here!")+"</h3></div></div>")}},window.totalLevelsComplated=function(e){for(var a=0,l=0;l<e.length;l++)"1"==e[l].ilb&&(a+=parseInt(e[l].level));return a},window.getUnique=function(e){for(var a=[],l=e.length,t=0;t<l;t++)-1===a.indexOf(e[t])&&a.push(e[t]);return a},window.displayMyGamesData=function(e,a,l){var t='<div class="tab-pane animated fadeIn '+l+' " id="'+a+'"><div class="tab-pane-inner" id='+a+"-inner>",r=(e=getUnique(e)).length;if("tab4"==a&&r>10&&(r=10),r<=0)t="tab5"==a?t+'<div class="btn alert-dark btn-md message" style="width: 95%; margin:0 auto;">'+favGameAltMsg+"</div>":t+'<div class="btn alert-dark btn-md message" style="width: 95%; margin:0 auto;">'+Drupal.t("You haven't given a like to any games yet. Look for the thumbs up icon on game pages to add them here!")+"</div>";else for(var s=0;s<r;s++){var i=0,o="",n="";if("1"==e[s].ilb)i=Math.floor(e[s].level/e[s].ml*100),parseInt(e[s].level)>=parseInt(e[s].ml)&&(e[s].level=e[s].ml,n='<span class="completed-xpnew"></span>'),1==e[s].timebasedcompletedSt&&(n='<span class="completed-xpnew"></span>'),1==e[s].timebasedcompletedSt?m='<div class="game-progress-status"><div class="progress"><div class="progress-text">  '+e[s].xp+' XP</div><div class="progress-bar" role="progressbar"   data-width="100%"   style="width: 100%" aria-valuenow="500" aria-valuemin="0" aria-valuemax="500"></div></div><div class="">'+n+"</div></div>":parseInt(e[s].level)<=parseInt(e[s].ml)&&(parseInt(e[s].level)<parseInt(e[s].ml)&&(o=Drupal.t("Level")+" <br/>"+e[s].level+" / "+e[s].ml),parseInt(e[s].level)==parseInt(e[s].ml)&&(o=""),m='<div class="game-progress-status"><div class="progress"><div class="progress-text">  '+e[s].xp+' XP</div><div class="progress-bar" role="progressbar"   data-width=" '+i+'"  style="width: '+i+'%" aria-valuenow="500" aria-valuemin="0" aria-valuemax="500"></div></div><div class="levels-completed">'+o+" "+n+"</div></div>");else{var m="";parseInt(e[s].time)>=parseInt(e[s].mta)?(e[s].time=e[s].mta,m='<div class="game-progress-status"><div class="progress"><div class="progress-text">  '+e[s].xp+' XP</div><div class="progress-bar" role="progressbar"   data-width="100%"   style="width:100%;" aria-valuenow="500" aria-valuemin="0" aria-valuemax="500"></div></div><div class=""><span class="completed-xpnew"></span></div></div>'):(e[0].time,i=Math.floor(e[s].time/e[s].mta*100),o=void 0!==e[0].time?Drupal.t("Minutes")+"<br/>"+e[s].time+" / "+e[s].mta:Drupal.t("Minutes")+"<br/> "+e[s].time+" / "+e[s].mta,m='<div class="game-progress-status"><div class="progress"><div class="progress-text">  '+e[s].xp+' XP</div><div class="progress-bar" role="progressbar"   data-width=" '+i+'"  style="width: '+i+'%;" aria-valuenow="500" aria-valuemin="0" aria-valuemax="500"></div></div><div class="levels-completed">'+o+" </div></div>")}if("flash"==e[s].type)var c='<span class="icon-gamethumbnail-js"> </span>';else c="";t=t+'<div class="game-item card my-game flex-row"><a href="'+e[s].alias+'"><img class="card-img-left flex-auto d-block rounded" alt="'+e[s].title+' Game" src="/sites/default/files/styles/thumbnail_small/public'+e[s].img+'">'+c+'</a><div class="card-body d-flex flex-column align-items-start"><h3 class="mb-0"><a href="'+e[s].alias+'">'+e[s].title+"</a></h3>"+m+"</div></div>",n=""}t=t+"</div><div class='game-footer d-lg-none w-100 my-4 text-center'><a aria-expanded='false' data-toggle='collapse' class='view-all-mobile' href='#"+a+"-inner'>"+window.viewAlltxt+"</a></div></div>",jQuery("#"+a).replaceWith(t),ViewAllMobile()},window.compare=function(e,a){return e.title<a.title?-1:e.title>a.title?1:0},window.sortMyGamesDataByTitle=function(e){return e.sort((function(e,a){return e.title>a.title?1:a.title>e.title?-1:0}))},window.sortMyGamesDataByTimestamp=function(e){return e.sort((function(e,a){return e.timestamp<a.timestamp?1:a.timestamp<e.timestamp?-1:0}))},window.sortMyGamesDataByXP=function(e){return e.sort((function(e,a){return e.xp<a.xp?-1:a.xp<e.xp?1:0}))},window.sortMyGamesDataByTotalPlays=function(e){return e.sort((function(e,a){return e.totalplays<a.totalplays?1:a.totalplays<e.totalplays?-1:0}))},jQuery(document).ready((function(){jQuery(".row.my-stuff").attr("style",""),jQuery("#follower-button").click((function(){var e=jQuery("#edit-username").val(),a=jQuery.trim(e);callFollowingRestAPI(a)})),jQuery(document).on("keypress","input",(function(e){if(13==e.which){var a=jQuery(this).val(),l=jQuery.trim(a);return callFollowingRestAPI(l),!1}})),window.callFollowingRestAPI=function(e){if(""==e){var a='<div class="alert alert-danger">'+Drupal.t("Please enter a valid user name")+"</div>";jQuery(".result_message").html(a)}""!=e&&jQuery.ajax({url:location.protocol+"//"+location.host+"/profile-rest-api/"+e+"/following",type:"POST",success:function(e){var a=JSON.parse(e);if(1==a.valid_update){var l=a.following_uids,t=a.my_follower_ids;if(void 0!==l&&""!==l&&void 0!==t&&""!==t){saveUserFollowings(l,t),displayUserFollowingDataOnFollowingPage(l,t);var r=a.div_id_to_update,s=a.div_content_to_update;jQuery(r).html(s)}jQuery("#edit-username").val("")}else r=a.div_id_to_update,s=a.div_content_to_update,jQuery(r).html(s)}})}})),window.get_cmg_signup_custom_abtest=function(){return"undefined"==typeof signup_abtest_2_variations_custom_selection||""===signup_abtest_2_variations_custom_selection?signup_abtest_2_variations_custom_selection:""},window.saveMyGamesLevelBased=function(e,l,t){if(void 0===e||""==e||0==e)return!0;var r=Date.now(),s=searchGamesById(e);if(r-lastKeyBoardorMouseActivityTime>6e4||"hidden"==document.visibilityState||!s.length)return!0;document.createTextNode((new Date).toString());var i={};i[e]="yes";var o="storagelocal-"+e+"-storagelocal";localStorage.setItem(o,"yes"),localStorage.setItem("runoncestarted",JSON.stringify(i));var n=0,m=!1,c=0,d=0;if(null!=localStorage.getItem("ThumbsUp-"+e)&&"like"==localStorage.getItem("ThumbsUp-"+e)&&(d=1),"undefined"==typeof timeSpentOnCurrentGame&&(timeSpentOnCurrentGame=0),("undefined"==typeof game_level||"undefined"!=typeof game_level&&""==game_level)&&(game_level=0),navigator.cookieEnabled){var p=localStorage.getItem("userprofile"),u=searchGamesById(e);if(null==p)void 0!==a&&null!=a||(a=0),mygameslist=[{id:e,level:game_level,time:1,totalplays:1,isFavorite:d,timestamp:Date.now(),timebasedcompletedSt:v,incrementgamestatus:"yes"}],(p={userid:a,lastplayedgame:e,mygameslist}).lastUpdated=(new Date).getTime(),c=1,m=!0;else{(p=JSON.parse(p)).lastplayedgame=e,mygameslistData=p.mygameslist;var g=!1,v=!0;if(mygameslistData.length>0)for(var f=0;f<mygameslistData.length;f++)mygameslistData[f].id==e&&(mygameslistData[f].time=mygameslistData[f].time?parseInt(mygameslistData[f].time)+1:1,m=!0,v=!0,mygameslistData[f].isFavorite=d,mygameslistData[f].timestamp=Date.now(),mygameslistData[f].timebasedcompletedSt=v,mygameslistData[f].incrementgamestatus="yes",incrementedTotalPlays||(mygameslistData[f].totalplays=mygameslistData[f].totalplays?mygameslistData[f].totalplays+1:1,incrementedTotalPlays=!0),g=!0);g||(mygameslistData.unshift({id:e,level:game_level,time:1,totalplays:1,isFavorite:d,timestamp:Date.now(),timebasedcompletedSt:v,incrementgamestatus:"yes"}),c=1,m=!0),p.mygameslist=mygameslistData,p.lastUpdated=(new Date).getTime()}if(m){if(c=1,myGamesData=generateMyGamesData(p.mygameslist),n="1"==u[0].ilb?u[0].timebasedcompletedSt?c*parseInt(u[0].mxp):c*parseInt(u[0].lxp):c*parseInt(u[0].mxp),void 0===p.progress_in_current_level)p.progress_in_current_level=n,p.user_level=1,p.max_xp_in_current_level=parseInt(userprofile_level_xpData[0]);else{var _=parseInt(p.progress_in_current_level);_+n>=parseInt(p.max_xp_in_current_level)?(totalXPGained=_+n-parseInt(p.max_xp_in_current_level),totalXPGained>=parseInt(userprofile_level_xpData[p.user_level])?p=checkHowManyLevelsEarned(p,n,userprofile_level_xpData):(p.progress_in_current_level=totalXPGained,p.user_level=parseInt(p.user_level)+1,p.max_xp_in_current_level=parseInt(userprofile_level_xpData[p.user_level-1]),store_profile_level_event(p.user_level)),1!=p.user_level&&navigator.cookieEnabled&&sessionStorage.setItem("leveledup",p.user_level)):p.progress_in_current_level=parseInt(p.progress_in_current_level)+n}localStorage.setItem("userprofile",JSON.stringify(p)),u=myGamesData.filter((function(a){return a.id==e})),isUserValidFreeUserOrSubscriber()&&(void 0!==e&&display_completed_game_xp(u[0].xp),display_user_profile_progressbar(),saveUserProgress())}}"function"==typeof cmg_game_xp_dsp&&(p.lastUpdated=(new Date).getTime(),localStorage.setItem("userprofile",JSON.stringify(p)),cmg_game_xp_dsp())},window.display_completed_game_xp=function(e){gameProgressHTML=' <div class="game-progress-status"><div class="progress game-xp-progress"><div class="progress-text"> '+e+" "+Drupal.t("XP")+'</div><div class="progress-bar" role="progressbar" style="width:100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div></div><div class=""><span class="completed-xpnew"></span></div></div>',jQuery(".game-progress-status").length?jQuery(".game-progress-status").replaceWith(gameProgressHTML):jQuery(".title-instructions").after(gameProgressHTML)},window.get_playlist_premium_handler=function(e){e.preventDefault(),sLeg=get_premium_access_leg_desc("4c044106"),trackEvent("Premium Subscription - "+sLeg,"Playlist Premium link clicked",document.title),trackGoalVirtualPV("/virtual/playlist-premium-click"),window.location.href=window.location.protocol+"//"+window.location.host+"/premium-access/4c044106"+get_signup_abtest_variant_3()},window.get_xp_leveled_up_msg=function(e){var a=!1;if(void 0!==e&&""!==e||(e="undefined"!=typeof userprofile&&void 0!==userprofile.user_level?parseInt(userprofile.user_level):1),void 0!==userprofile.progress_in_current_level&&void 0!==userprofile.user_level){var l=userprofile.max_xp_in_current_level,t=Math.floor(userprofile.progress_in_current_level/l*100);if(e>1&&(t<=20||e<userprofile.user_level)&&!isCurrentUserAVisitor&&void 0!==drupalSettings.userprofile){var r=drupalSettings.userprofile;void 0!==r.utln&&void 0!==r.utln[e]?a='theme, "'+r.utln[e]+'"!':void 0!==r.ualn&&void 0!==r.ualn[e]&&(a='avatar, "'+r.ualn[e]+'"!')}}return a},window.display_xp_leveled_up_msg=function(e){jQuery(".leveled-up-status").length&&jQuery(".leveled-up-status").remove(),void 0!==e&&""!==e||(e="undefined"!=typeof userprofile&&"undefined"!==userprofile.user_level?parseInt(userprofile.user_level):1);var a=get_xp_leveled_up_msg(),l=localStorage.getItem("unlock_xp_level_up"),t=!1;null!==l?e>(l=parseInt(l))&&(t=!0):t=!0,a&&t&&jQuery(".row.user-hud.pt-5").length&&jQuery(".row.user-hud.pt-5").after('<div role="contentinfo" aria-label="Status message" class="leveled-up-status"><div class="alert alert-success alert-dismissible" role="alert">Level Up: You unlocked a new '+a+'<button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span aria-hidden="true">×</span> </button> </div> </div>')},window.xp_levelup_alert_handler=function(e){return e.preventDefault(),"undefined"!=typeof userprofile&&void 0!==userprofile.user_level&&localStorage.setItem("unlock_xp_level_up",userprofile.user_level),!1},jQuery(window).resize((function(){ViewAllMobile()})),window.ViewAllMobile=function(){$(window).width()<768?index=2:$(window).width()<970?index=5:index="all",$(".view-all-mobile").each((function(){var e=$(this).parents(".tab-pane").find(".tab-pane-inner"),a=$(this).parent(),l=e.find(".game-item").length;a.show(),l<=3?a.hide():2==index?(e.removeClass("showSixitems"),e.addClass("showThreeitems")):5==index?(e.removeClass("showThreeitems"),e.addClass("showSixitems")):(e.removeClass("showThreeitems"),e.removeClass("showSixitems")),$(this).on("click",(function(l){l.preventDefault(),e.removeClass("showThreeitems"),e.removeClass("showSixitems"),a.hide()}))}))},window.cmg_premium_upsell_modal_trackevent=function(e){var a=get_premium_access_leg_desc("5b8689c9");pvCount=parseInt(localStorage.getItem("_cmg_pvc")||0),pvCount<=1&&(a=get_premium_access_leg_desc("be77d560")),trackEvent("Freemium-Upsell-Modal",e+" - Leg - "+a,document.title)},window.genrate_image_link=function(e,a){return escapeHtml('<div class="col-sm-3 alert-icon-container"><img class="alert-img-left flex-auto d-none d-lg-block rounded-lg" src=\'/sites/default/files/styles/thumbnail_small/public'+a+'\'><span class=" alert-complete-icon"></span></div>')},window.genrate_link=function(e,a){return escapeHtml('<div class="col-sm-9  alert-info-following "><div class="  alert-txt-info"><a href=\''+e+'\' class="alert-link">'+a+"</a></div></div>")},window.genrate_gamename_link=function(e,a){return'<a href="'+e+'">'+a+"</a>"},window.escapeHtml=function(e){return e.replace(/"/g,"cmgdq").replace(/{/g,"cmgocb").replace(/}/g,"cmgccb").replace(/,/g,"cmgcomma").replace(/\[/g,"cmgsqbr").replace(/\\/g,"cmgbb").replace(/</g,"cmglt").replace(/>/g,"cmggt").replace(/=/g,"cmgeq")},window.getGetOrdinal=function(e){var a=["th","st","nd","rd"],l=e%100;return e+(a[(l-20)%10]||a[l]||a[0])},window.store_game_count_event=function(){if("en"==drupalSettings.language)var e="/profile";else e="/"+drupalSettings.language+"/profile";if(null!=getCookie("cmg_fx")&&!isCurrentUserAVisitor){var l=localStorage.getItem("userprofile");if(null!=l&&void 0!==(l=JSON.parse(l)).mygameslist&&void 0!==l.publicname){mygameslistData=l.mygameslist;var t=l.mygameslist.length,r=escapeHtml('<div class="col-sm-9  alert-info-following "><div class="  alert-txt-info">'+genrate_gamename_link(e+"/"+l.publicname.toLowerCase(),l.publicname)+" played their "+getGetOrdinal(t)+" game </div></div>")+escapeHtml('<div class="col-sm-3 alert-icon-container"><div class="alert-circle-icon"><i>'+t+"</i></div></div>"),s=null!==localStorage.getItem("cmg_sgl")?parseInt(localStorage.getItem("cmg_sgl")):1;if(10==t&&t!=s&&(localStorage.setItem("cmg_sgl",t),saveUserProfileEvent(a,r)),t>24&&t!=s)for(var i=t;i<=t;i+=1)i%25==0&&(localStorage.setItem("cmg_sgl",t),saveUserProfileEvent(a,r))}}},store_game_count_event(),window.store_game_xp_leveled_up_event=function(e){var l=localStorage.getItem("userprofile");if(null!=l&&(l=JSON.parse(l),void 0!==e&&""!==e||(e=void 0!==l&&void 0!==l.user_level?parseInt(l.user_level):1),void 0!==l.progress_in_current_level&&void 0!==l.user_level)){var t=l.max_xp_in_current_level;if(Math.floor(l.progress_in_current_level/t*100),e>1&&!isCurrentUserAVisitor&&void 0!==drupalSettings.userprofile){var r=drupalSettings.userprofile;if(void 0!==r.utln&&void 0!==r.utln[e]&&void 0!==r.utli&&void 0!==r.utli[e]){var s=r.utli[e];if(e!=(null!==localStorage.getItem("cmg_utln")?parseInt(localStorage.getItem("cmg_utln")):1)){localStorage.setItem("cmg_utln",e);var i=escapeHtml('<div class="col-sm-9  alert-info-following "><div class="  alert-txt-info">'+genrate_gamename_link(profile_path+"/"+l.publicname.toLowerCase(),l.publicname)+" reached Level "+e+"  and unlocked a new theme, "+r.utln[e]+"</div></div>")+escapeHtml('<div class="col-sm-3  alert-icon-container "><img class="alert-img-left theme_change_alert_img flex-auto d-none d-lg-block rounded-lg"  alt=\'\'  src=\''+s+"'></span></div>");saveUserProfileEvent(a,i)}}else void 0!==r.ualn&&void 0!==r.ualn[e]&&void 0!==r.uali&&void 0!==r.uali[e]&&(s=r.uali[e],e!=(null!==localStorage.getItem("cmg_uali")?parseInt(localStorage.getItem("cmg_uali")):1)&&(localStorage.setItem("cmg_uali",e),i=escapeHtml('<div class="col-sm-9  alert-info-following "><div class="  alert-txt-info">'+genrate_gamename_link(profile_path+"/"+l.publicname.toLowerCase(),l.publicname)+" reached Level "+e+" and unlocked a new avatar, "+r.ualn[e]+"</div></div>")+escapeHtml('<div class="col-sm-3  alert-icon-container "><img class="alert-img-left theme_change_alert_img flex-auto d-none d-lg-block rounded-lg"  alt=\'\'  src=\''+s+"'></div>"),saveUserProfileEvent(a,i)))}}},window.store_profile_level_event=function(e){var l=localStorage.getItem("userprofile");if(null!=l&&void 0!==(l=JSON.parse(l)).user_level&&void 0!==l.publicname){if(e=l.user_level,l.user_level>=1&&l.user_level<=4)var t='"'+window.p_Levels.level_01+'"';l.user_level>=5&&l.user_level<=9&&(t='"'+window.p_Levels.level_02+'"'),l.user_level>=10&&l.user_level<=14&&(t='"'+window.p_Levels.level_03+'"'),l.user_level>=15&&l.user_level<=19&&(t='"'+window.p_Levels.level_04+'"'),l.user_level>=20&&l.user_level<=24&&(t='"'+window.p_Levels.level_05+'"'),l.user_level>=25&&l.user_level<=29&&(t='"'+window.p_Levels.level_06+'"'),l.user_level>=30&&l.user_level<=34&&(t='"'+window.p_Levels.level_07+'"'),l.user_level>=35&&l.user_level<=39&&(t='"'+window.p_Levels.level_08+'"'),l.user_level>=40&&l.user_level<=44&&(t='"'+window.p_Levels.level_09+'"'),l.user_level>=45&&l.user_level<=49&&(t='"'+window.p_Levels.level_10+'"'),l.user_level>=50&&(t='"'+window.p_Levels.level_10+'"');var r=null!==localStorage.getItem("cmg_ple")?parseInt(localStorage.getItem("cmg_ple")):1,s=searchGamesById(gameId);if(s.length&&"1"===s[0].ilb)var i=e+1;else i=e;if(i!=r){localStorage.setItem("cmg_ple",i);var o="/profile";"en"!=drupalSettings.language&&(o="/"+drupalSettings.language+"/profile");var n=escapeHtml('<div class="col-sm-9  alert-info-following "><div class="  alert-txt-info">'+genrate_gamename_link(o+"/"+l.publicname.toLowerCase(),l.publicname)+" reached Level "+i+' and became "'+t+'"</div></div>')+escapeHtml('<div class="col-sm-3 alert-icon-container">  <div class=\'level level-'+i+'\'>  <a class="nav-link text-center">      <span class="badge badge-primary">'+i+"</span></a></div></div>");saveUserProfileEvent(a,n)}}},window.store_game_like_event=function(e){var l=localStorage.getItem("userprofile");if(null!=l&&void 0!==(l=JSON.parse(l)).publicname){var t=searchGamesById(e);if("en"==drupalSettings.language){var r="/profile";if(t.length)var s=t[0].alias}else r="/profile",t.length&&(s=t[0].alias);var i=null!==localStorage.getItem("cmg_gle")?parseInt(localStorage.getItem("cmg_gle")):1;if(t.length&&t[0].isFavorite!=i){localStorage.setItem("cmg_gle",t[0].isFavorite);var o=escapeHtml('<div class="col-sm-9  alert-info-following "><div class="  alert-txt-info">'+genrate_gamename_link(r+"/"+l.publicname.toLowerCase(),l.publicname)+" liked "+genrate_gamename_link(s,t[0].title)+"</div></div>")+escapeHtml('<div class="col-sm-3  alert-icon-container "><a href='+s+'><img class="alert-img-left flex-auto d-none d-lg-block rounded-lg"  alt=\''+t[0].title+"'  src='/sites/default/files/styles/thumbnail_small/public/"+t[0].img+'\'><span class=" alert-like-icon"></span></a></div>');saveUserProfileEvent(a,o)}}},window.store_first_time_played_game_event=function(e){var l=localStorage.getItem("userprofile");if(null!=l&&void 0!==(l=JSON.parse(l)).publicname){var t=searchGamesById(e);if("en"==drupalSettings.language){var r="/profile";if(t.length)var s=t[0].alias}else r="/profile",t.length&&(s=t[0].alias);var i=1;if(void 0!==t&&t.length&&void 0!==t[0].id&&(i=null!==localStorage.getItem("cmg_ftp_"+t[0].id)?parseInt(localStorage.getItem("cmg_ftp_"+t[0].id)):1,t[0].id!=i)){localStorage.setItem("cmg_ftp_"+t[0].id,t[0].id);var o=escapeHtml('<div class="col-sm-9  alert-info-following "><div class="  alert-txt-info">'+genrate_gamename_link(r+"/"+l.publicname.toLowerCase(),l.publicname)+" played "+genrate_gamename_link(s,t[0].title)+" for the first time </div></div>")+escapeHtml('<div class="col-sm-3  alert-icon-container "> <a href='+s+'><img class="alert-img-left flex-auto d-none d-lg-block rounded-lg" alt=\''+t[0].title+"'   src='"+t[0].img+'\'> <span class="alert-first-game"></span></a></div>');saveUserProfileEvent(a,o)}}},window.store_add_playlist_event=function(){var e=localStorage.getItem("userprofile");if(null!=e&&(e=JSON.parse(e),void 0!==drupalSettings.userprofile&&void 0!==e.publicname&&void 0!==drupalSettings.userprofile.playlist.playlist_name)){var l=escapeHtml('<div class="col-sm-9  alert-info-following "><div class="  alert-txt-info">'+genrate_gamename_link("/profile/"+e.publicname.toLowerCase(),e.publicname)+" created a new playlist, "+genrate_gamename_link(drupalSettings.userprofile.playlist.alias,drupalSettings.userprofile.playlist.playlist_name)+"</div></div>")+escapeHtml('<div class="col-sm-3  alert-icon-container "> <a href='+drupalSettings.userprofile.playlist.alias+'><img class="alert-img-left playlist-following-alert flex-auto d-none d-lg-block rounded-lg" alt=\''+drupalSettings.userprofile.playlist.playlist_name+"'   src='"+drupalSettings.userprofile.playlist.thumbnail_path+"'></a></div>");saveUserProfileEvent(a,l)}},void 0!==drupalSettings.userprofile&&void 0!==drupalSettings.userprofile.playlist&&void 0!==drupalSettings.userprofile.playlist.playlist_name&&store_add_playlist_event(),window.playlist_banner_overlay_promo_signup_handler=function(e){event.preventDefault();var a="",l="/premium-access/39980b12",t="Get playlist masthead banner - masthead clicked";if(void 0!==e&&""!==e&&(t=e),a=get_premium_access_leg_desc("39980b12"),"function"==typeof getCookie&&null!==getCookie("cmg_fx")&&null===getCookie("cmg_sx")&&(l="/profile/premium-access/4c044106/"+getCookie("cmg_fx").toLowerCase(),a=get_premium_access_leg_desc("4c044106")),trackEvent("Premium Subscription - "+a,t,document.title),"function"==typeof get_signup_abtest_variant_2&&(l+=get_signup_abtest_variant_2()),"en"==drupalSettings.language)var r=l;else r="/"+drupalSettings.language+l;window.location.href=window.location.protocol+"//"+window.location.host+r},window.playlist_banner_right_sidebar_handler=function(){event.preventDefault();var e="",a="/premium-access/a1ca2f3b",l="Get playlist banner screen mode - masthead clicked";if("undefined"!=typeof promo_action&&""!==promo_action&&(l=promo_action),e=get_premium_access_leg_desc("a1ca2f3b"),"function"==typeof getCookie&&null!==getCookie("cmg_fx")&&null===getCookie("cmg_sx")&&(a="/profile/premium-access/780ef8a3/"+getCookie("cmg_fx").toLowerCase(),e=get_premium_access_leg_desc("780ef8a3")),trackEvent("Premium Subscription - "+e,l,document.title),"function"==typeof get_signup_abtest_variant_2&&(a+=get_signup_abtest_variant_2()),"en"==drupalSettings.language)var t=a;else t="/"+drupalSettings.language+a;window.location.href=window.location.protocol+"//"+window.location.host+t},jQuery(document).ready((function(){"function"==typeof isUserValidFreeUserOrSubscriber&&isUserValidFreeUserOrSubscriber()&&display_user_profile_block();var e=document.querySelectorAll(".welcome-box");e&&e.forEach((function(e){e.style.display="block"}))})),window.funcloginchk=function(){null!=getCookie("cmg_uid")&&(navigator.cookieEnabled&&localStorage.removeItem("userprofile"),jQuery.ajax({method:"POST",url:"/user/logout",success:function(e){return!0}}))},$(document).ready((function(){setTimeout((function(){!function(e){if($(e).length>0){var a=getCookie("cmg_fx");a&&$(e).find("a").each((function(){var e=$(this).attr("href");if(e.search("premium-access")>=0&&e.search("bigscreen")<1)if(-1==e.search("profile")){var l=e.substring(0,e.search("premium-access"))+"profile/"+e.substring(e.search("premium-access"),e.length);$(this).attr("href",l+"/"+a.toLowerCase())}else $(this).attr("href",e+"/"+a.toLowerCase());else if(e.search("premium-access")>=0&&e.search("bigscreen")>0)if(-1==e.search("profile")){var t=e.substring(0,e.search("premium-access"))+"profile/"+e.substring(e.search("premium-access"),e.length);$(this).attr("href",t+"?ts="+(new Date).getTime())}else $(this).attr("href",e+"?ts="+(new Date).getTime())}))}}(".payment-info, .user-hud .settings, .pane-bean-new-go-ad-free, #conform-create-button-id, .user-playlist-message")}),300)}))}})[546]();;
(()=>{function a(){$("html").removeClass("menu-opened"),$(".mnav-content").slideUp(200),$(".mnav-overlay").fadeOut(300),$(".tabbed-navbar, .tabbed-navbar li a").removeClass("active")}$(document).ready((function(){var e=$(".mobile-navbar").find(".search-results-container");e.length>0&&e.appendTo("#mnav_search .mnav-scroller"),"/"==location.pathname||$("body").hasClass("path-frontpage")?$(".tabbed-navbar .tab-home").addClass("active"):$("body").hasClass("logged-in")&&-1!==location.pathname.indexOf("/profile/")&&$(".tabbed-navbar .tab-profile").addClass("active"),$(".tabbed-navbar li a").on("click",(function(e){$(e.currentTarget).hasClass("tab-home")||(e.preventDefault(),$(e.currentTarget.getAttribute("href")).is(":visible")?a():(!function(a){$(a).find(".mnav-content-in").css("max-height",window.innerHeight),$("html").addClass("menu-opened");var e=$(a).find(".menu-search-bar"),n=$(".mnav-overlay");if(n.length>0)n.fadeIn(300);else{var t=document.createElement("div");t.classList.add("mnav-overlay"),t.style.display="none",$(".mobile-navbar").prepend(t),$(".mnav-overlay").fadeIn(300)}var i=300;e.length>0&&$("body").hasClass("mac")&&$("html").hasClass("mobile-device")&&(i=0),$(".mnav-content").not(a).hide(),$(".tabbed-navbar").addClass("active"),$(a).length>0&&$(a).slideDown(i,(function(){e.length>0&&$("body").hasClass("android")&&$("html").hasClass("mobile-device")&&$(".menu-search-bar").attr("autofocus","autofocus").trigger("focus")})),e.length>0&&$("body").hasClass("mac")&&$("html").hasClass("mobile-device")&&$(".menu-search-bar").attr("autofocus","autofocus").trigger("focus")}($(this).attr("href")),$(".tabbed-navbar li a").removeClass("active"),$(this).addClass("active")))})),$("#mnav_categories .pane-content > .menu > li.is-expanded > a").on("click",(function(a){a.preventDefault(),function(a){var e=$("#mnav_categories");e.find(".mnavh-action-left").removeClass("hide"),e.find(".mnav-heading h3").text($(a).text());var n='<li class="nested all-cat-link"><a href="'.concat($(a).attr("href"),'">').concat(Drupal.t("All @cat Games",{"@cat":$(a).text()}),"</a></li>"),t=$(a).siblings(".expandable-wrapper").find(" > .menu");0==t.find("> .all-cat-link").length&&t.prepend(n),e.find(".mnav-scroller").scrollTop(0),$(a).parent().addClass("show-menu"),$(a).css("opacity","0"),setTimeout((function(){$(a).parent().addClass("is-active")}),10),$(a).parent().siblings().hide()}(this)})),$(".mobile-navbar").on("click",".mnav-overlay, .mnav-con-head .close-btn",(function(){a()})),$("body").on("click","#close-search-box",(function(){window.matchMedia("(max-width: 960px)").matches&&a()})),$("#mnav_categories .mnavh-action-left a").on("click",(function(){var a,e;a=$("#mnav_categories"),(e=a.find(".pane-content > .menu > li.is-active")).siblings().show(),e.find("> a").css("opacity","1"),e.removeClass("is-active"),a.find(".mnav-scroller").scrollTop(0),setTimeout((function(){e.removeClass("show-menu")}),310),a.find(".mnav-heading h3").text(Drupal.t("Categories")),a.find(".mnavh-action-left").addClass("hide")})),$(".menu-language > a > span, .tab-lang .tab-title").text($("html").attr("lang").toUpperCase())})),$(window).on("resize",(function(){$(".mnav-content:visible").find(".mnav-content-in").css("max-height",window.innerHeight)}))})();;
(()=>{function a(a,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=new URLSearchParams(window.location.search).get("variant"),t=document.documentElement.lang||"en",o="en"===t?"/":"/".concat(t,"/");"d"!==s?n?(e.stop().animate({opacity:1},200),e.wrap('<a href="'.concat(o,'" title="Home" rel="home"></a>'))):0===a?(e.stop().animate({opacity:0},200),e.unwrap()):(e.stop().animate({opacity:1},200),e.wrap('<a href="'.concat(o,'" title="Home" rel="home"></a>'))):e&&(e.css({opacity:1}),e.wrap('<a href="'.concat(o,'" title="Home" rel="home"></a>')))}function e(e,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:58,t=$("body"),o=$(n),r=0;o.addClass(e);var d=$("#branding");new IntersectionObserver((function(e,n){e.forEach((function(e){e.isIntersecting?(a(0,$("#logo-stacked").find("img")),o.removeClass("at-top")):(a(1,$("#logo-stacked").find("img")),o.addClass("at-top"))}))}),{root:null,rootMargin:"0px",threshold:0}).observe(d[0]),$(window).on("scroll",function(a){var e,n,s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return function(){var o=this,r=arguments;e?(clearTimeout(n),n=setTimeout((function(){Date.now()-s>=t&&(a.apply(o,r),s=Date.now())}),t-(Date.now()-s))):(a.apply(o,r),s=Date.now(),e=!0)}}((function(){var a=$(this).scrollTop(),n=a>r&&a>s;a<r?(o.removeClass("scrolled-down"),o.addClass("scrolled-up"),t.addClass("".concat(e,"-header"))):n&&(o.removeClass("scrolled-up"),o.addClass("scrolled-down"),t.removeClass("".concat(e,"-header"))),r=a}),10))}function n(){e("smart-scroll",".page-header",58,!0)}function s(){e("sticky-nav",".page-header",58,!0)}function t(a,e,t){var o=$("body"),r=$("#branding"),d=($(".page-header"),$("#logo-stacked").find("img"));switch(a){case"a":s(),r.addClass("d-lg-block");break;case"b":n(),o.addClass("variant-b");break;case"c":d.css("display","none"),r.addClass("d-lg-block");break;case"d":o.addClass("variant-d"),r.addClass("d-none");break;case"e":o.addClass("variant-e"),s(),r.addClass("d-none");break;case"f":n(),o.addClass("variant-f"),r.addClass("d-none")}}$(document).ready((function(){$("body").hasClass("front");var a=window.location.href.includes("0-"),e=$(".sitewide-alert.alert"),n=($("#logo-stacked").find("img"),new URLSearchParams(window.location.search).get("variant")),o=n?n.split(","):[];if(a)return o.length>0?void o.forEach((function(a){t(a)})):void 0;function r(a,e){var n="auto"===a.css("top")?0:parseInt(a.css("top"),10);a.css("top","".concat(n+e,"px"))}function d(a){$(a).siblings(":not(.expandable-wrapper)").attr("aria-expanded","true"),$(a).parent().addClass("open")}function i(a){$(a).siblings(":not(.expandable-wrapper)").attr("aria-expanded","false"),$(a).parent().removeClass("open")}e.length&&e.is(":visible")&&(e.children().length||e.text().trim())&&r($(".page-header"),58),$("body").hasClass("toolbar-fixed")&&$(".page-header").length&&r($(".page-header"),53),0===o.length?s():o.forEach((function(a){t(a)})),$(".page-header .pane-menu-menu-desktop-header-menu:eq(0) li.is-expanded").each((function(a,e){var n=$(e).find("> a"),s='<button class="btn nav-expand-btn"><span class="visually-hidden">Show submenu for '.concat(n.text(),"</span></button>");n.after(s)})),$(".nav-expand-btn").on("click",(function(){$(this).parent().hasClass("open")?i(this):d(this)}));var l=$(".page-header .pane-menu-menu-desktop-header-menu .pane-content > .menu > li > a");l.on("focus",(function(){l.parent(".is-expanded").removeClass("open"),$("body").hasClass("search-expanded")&&($("body").removeClass("search-expanded"),$(".menu-search-bar").val("").next(".btn-clear").hide(),$(".page-header .search-results-container").is(":visible")&&$(".page-header .search-results-container").html("").hide()),($(this).parent().hasClass("menu-language")||$(this).parent().hasClass("menu-profile"))&&d(this)})),$(document).on("mousemove",(function(){i(l)})),$(".menu-search-bar").on("focus",(function(){$(".page-header .expandable-wrapper:visible").parent().removeClass("open"),$(".page-header .expandable-wrapper:visible").siblings().attr("aria-expanded","false")}))}))})();;
